<template>
    <div>
        <div class="slds-form-element">
            <div class="slds-form-element__control">
                <div class="slds-combobox_container">
                    <div id="box" class={boxClass} aria-expanded="true" aria-haspopup="listbox" role="combobox">
                        <div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none">
                            <!-- <template if:true={isValueSelected}>
                                <div id="lookup-pill" >class="slds-pill-container" -->
                                    <!--<lightning-pill class="pillSize" label={selectedName} name={selectedName} onremove={handleRemovePill} href={href}>
                                        <lightning-icon icon-name={iconName} alternative-text="acc" ></lightning-icon>
                                    </lightning-pill>-->
                                    <!-- <div class="slds-pill slds-pill_link" style="width:100%;height:32px;">
                                        <div class="slds-pill__icon_container">
                                          <div class="slds-icon_container slds-combobox__input-entity-icon" title="Icon">
                                            <lightning-icon icon-name={iconName} alternative-text="Icon" ></lightning-icon>
                                            <span class="slds-assistive-text"></span>
                                          </div>
                                        </div>
                                        <a href={selectedNameUrl} class="slds-pill__action" title={selectedName} target="_blank">
                                          <div class="slds-pill__label slds-p-left_xx-small">{selectedName}</div>
                                        </a>
                                        <template if:false={hideRemove}>
                                            <button class="slds-button slds-button_icon slds-button_icon slds-pill__remove" title="Remove" onclick={handleRemovePill}>
                                                <lightning-icon class="slds-button__icon" icon-name="utility:close" alternative-text="Remove" size="x-small"></lightning-icon>
                                              <span class="slds-assistive-text">Remove</span>
                                            </button>
                                        </template>
                                        
                                      </div>
                                </div>
                            </template>  -->

                            <template if:true={isValueSelected}>
    <div class="slds-input slds-combobox__input slds-combobox__input-value slds-grid slds-grid_vertical-align-center" style="height:32px; padding-left:.0rem; padding-right:.0rem; border:1px solid #d4d4d4; border-radius:.25rem;">
        <div class="slds-icon_container slds-combobox__input-entity-icon" title="Icon">
            <lightning-icon icon-name={iconName} alternative-text="Icon" size="x-small"></lightning-icon>
        </div>
<a href={selectedNameUrl} class="slds-pill__action" style="flex-grow:1;" title={selectedName} target="_blank">
    <div class="slds-truncate" style= "padding-left:30px;">{selectedName}</div>
</a>

        <template if:false={hideRemove}>
            <button class="slds-button slds-button_icon slds-input__icon" title="Remove" onclick={handleRemovePill}>
                <lightning-icon icon-name="utility:close" alternative-text="Remove" size="x-small"></lightning-icon>
            </button>
        </template>
    </div>
</template>

                            <template if:false={isValueSelected}>

                                <div class="slds-p-top_none">
                                    <lightning-input class={inputClass} type="search" id="input" value={searchTerm}
                                                     onclick={handleClick} onblur={onBlur} onchange={onChange}
                                                     variant="label-hidden" autocomplete="off" placeholder={searchPlaceholder}>
                                    </lightning-input>
                                </div>
                            </template>
                        </div>
                        <div id="listbox-id-1" class="slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid" role="listbox">
                            <ul class="slds-listbox slds-listbox_vertical slds-p-around_small" role="presentation">
                                <center>{message}</center>
                                <template if:true={records}>
                                <template for:each={records} for:item="record">
                                    <li class="cursor-pointer slds-m-bottom_small slds-p-left_small" key={record.Id} onclick={onSelect} data-id={record.Id} role="presentation" data-name={record.Name}>
                                        <span class="slds-lookup__item-action slds-lookup__item-action--label" role="option">
                                            <lightning-icon class="slds-icon slds-icon--small slds-icon-text-default slds-m-right_small" icon-name={iconName} alternative-text={objName} size="small"></lightning-icon>
                                            &nbsp;<span class="slds-truncate">{record.Name}</span>
                                        </span>
                                    </li>
                                </template>
                                </template>                                
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>