<template>
    <template if:true={isLoading}>
        <lightning-spinner alternative-text="Loading..." size="medium"></lightning-spinner>
    </template>
    <div class="vertical-tab-layout">
        <!-- Sidebar Tabs -->
        <div class="horizontal-tab-layout">
            <div class="horizontal-tabs">
                <!-- Sub-Tab Navigation -->

                <div class={supplyOverviewTabClass} onclick={selectSupplyOverview}><lightning-icon
                        icon-name='standard:digital_verification_config_group'
                        alternative-text='digital_verification_config_group' size='small'
                        title='digital_verification_config_group'></lightning-icon> Supply Overview</div>
                <div class={supplierScorecardTabClass} onclick={selectSupplierScorecard}><lightning-icon
                        icon-name='standard:chart' alternative-text='chart' size='small'
                        title='chart'></lightning-icon>&nbsp;
                    Supplier Scorecard</div>
                <!-- <div class={inventoryLevelTabClass} onclick={selectInventoryLevel}>üîßInventory Levels(Manufacturing)
                </div> -->
                <div class={safetyTabClass} onclick={selectSafety}><lightning-icon icon-name='standard:capacity_plan'
                        alternative-text='capacity_plan' size='small' title='capacity_plan'></lightning-icon> Stock
                    Alerts </div>
                <!-- <div class={procurementPlanningTabClass} onclick={selectProcurementPlanning}>üìë Procurement & Replenishment</div> -->
            </div>

            <!-- Content Panel -->
            <div class="vertical-tab-content">

                <!-- Inventory Level -->

                <template if:true={isInventoryLevel}>
                    <!-- Main Lightning Card -->
                    <lightning-card title="üìä Inventory Level Chart">

                        <!-- Filters in One Line -->
                        <div class="slds-grid slds-wrap slds-gutters slds-p-around_small slds-align-end">

                            <!-- Product Lookup -->
                            <div class="slds-col slds-size_12-of-12 slds-medium-size_3-of-12">
                                <div class="slds-form-element">
                                    <label class="slds-form-element__label" for="productLookup">Product</label>
                                    <div class="slds-form-element__control">
                                        <c-custom-input-lookup-l-w-c id="productLookup" obj-name="Product2"
                                            filter="Issue_Manufacturing_Order__c = true"
                                            icon-name="standard:product" search-placeholder="Search Product"
                                            selected-value={productId} selected-name={productName}
                                            onlookupselected={handleProductSelection}>
                                        </c-custom-input-lookup-l-w-c>
                                    </div>
                                </div>
                            </div>

                            <!-- From Date -->
                            <div class="slds-col slds-size_12-of-12 slds-medium-size_3-of-12">
                                <lightning-input type="date" label="From Date" value={fromDate}
                                    onchange={handleFromDateChange}>
                                </lightning-input>
                            </div>

                            <!-- To Date -->
                            <div class="slds-col slds-size_12-of-12 slds-medium-size_3-of-12">
                                <lightning-input type="date" label="To Date" value={toDate}
                                    onchange={handleToDateChange}>
                                </lightning-input>
                            </div>

                            <!-- Search Button -->
                            <div class="slds-col slds-size_12-of-12 slds-medium-size_3-of-12 slds-p-top_large">
                                <lightning-button label="Search" variant="brand" onclick={handleSearch}>
                                </lightning-button>
                                <lightning-button variant="neutral" label="Create MO" icon-name="utility:description"
                                    onclick={handleCreateMO} class="slds-m-left_small"></lightning-button>
                            </div>
                        </div>


                        <!-- üìä Top 5 Products View -->
                        <template if:true={isTop5View}>
                            <div class="slds-m-top_large" data-id="top5ChartContainer">
                                <canvas class="barChartTop5" lwc:dom="manual"></canvas>
                            </div>
                        </template>

                        <!-- üìä Single Product View -->
                        <template if:true={isSingleProductView}>
                            <div class="slds-m-top_large" data-id="singleProductChartContainer">
                                <canvas class="barChartSingle" lwc:dom="manual"></canvas>
                            </div>

                            <!-- Detailed Summary Table -->
                            <lightning-card title="üì¶ Inventory Summary" class="slds-m-top_large">
                                <div class="slds-box slds-box_xx-small">
                                    <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                        <thead>
                                            <tr>
                                                <th>Raw</th>
                                                <th>WIP</th>
                                                <th>Finished</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <div><strong>Expected Quantity:</strong> {rawExpected}</div>
                                                    <div><strong>Consumed Quantity:</strong> {rawConsumed}</div>
                                                    <div><strong>Scrapped Quantity:</strong> {rawScrapped}</div>
                                                </td>
                                                <td>
                                                    <div><strong>Produced Quantity:</strong> {wipQuantity}</div>
                                                    <div><strong>Scrapped Quantity:</strong> {wipScrapped}</div>
                                                </td>
                                                <td>
                                                    <div><strong>No of Items Requested:</strong> {finishedRequested}
                                                    </div>
                                                    <div><strong>Number of Items In Stock:</strong> {finishedInStock}
                                                    </div>
                                                    <div><strong>Number of Items Scrapped:</strong> {finishedScrapped}
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </lightning-card>
                        </template>
                    </lightning-card>
                </template>

                <!-- Supplier Score card  -->
                <template if:true={isSupplierScorecard}>


                    <!-- üîÅ ALL FILTERS IN ONE LINE -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Scorecard</h3>
                        </div>
                        <div class="card-body">
                            <div class="slds-card">

                                <div class="slds-card">
                                    <div>
                                        <div class="slds-grid slds-wrap ">

                                            <div
                                                class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3 slds-large-size_1-of-3 slds-p-around_small">
                                                <div class="slds-form-element">
                                                    <label class="slds-form-element__label">Vendor</label>
                                                    <div class="slds-form-element__control">
                                                        <c-custom-input-lookup-l-w-c obj-name="Account"
                                                            icon-name="standard:account"
                                                            search-placeholder="Search Vendor"
                                                            filter-field="Account_Type__c" filter-value="Vendor"
                                                            selected-value={selectedVendorId} is-value-selected=true
                                                            selected-name={selectedVendorName}
                                                            onlookupselected={handleVendorSelect}>
                                                        </c-custom-input-lookup-l-w-c>
                                                    </div>
                                                </div>
                                            </div>

                                            <div
                                                class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3 slds-large-size_1-of-3 slds-p-around_small">
                                                <div class="slds-form-element">
                                                    <label class="slds-form-element__label">Select Year Type</label>
                                                    <div class="slds-form-element__control">
                                                        <div class="radio-button-group">
                                                            <button class={spendFiscalRadioClass}
                                                                onclick={selectSpendFiscalYear}>Fiscal Year</button>
                                                            <button class={spendCustomRadioClass}
                                                                onclick={selectSpendCustomYear}>Custom Year</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <template if:true={showSpendCustomYearSelector}>
                                                <div
                                                    class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3 slds-large-size_1-of-3 slds-p-around_small">
                                                    <div class="slds-form-element">
                                                        <div class="slds-grid slds-grid_align-spread">
                                                            <label class="slds-form-element__label">Selected
                                                                Year:</label>
                                                            <span
                                                                class="slds-text-body_regular">{selectedSpendCustomYear}</span>
                                                        </div>
                                                        <div class="slds-form-element__control">
                                                            <input id="spendYearSlider" type="range" min={minCustomYear}
                                                                max={maxCustomYear} value={selectedSpendCustomYear}
                                                                oninput={handleSpendYearSliderChange}
                                                                class="slds-range" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <hr>

                            <div class="slds-grid slds-wrap slds-gutters_small">
                                <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12">
                                    <div class="chart-panel slds-m-around_medium">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <lightning-icon icon-name="action:flow"
                                                    alternative-text="Spend Over Time" size="x-small"></lightning-icon>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="description">Spend Over Time (Monthly)</p>
                                            </div>
                                        </div>
                                        <canvas class="spend-over-time-chart" lwc:dom="manual"></canvas>
                                        <lightning-layout class="slds-p-around_small slds-wrap">
                                            <lightning-layout-item size="12" medium-device-size="6"
                                                class="slds-p-right_small">
                                                <lightning-combobox label="Forecasting Algorithm" value="Holt-Winters"
                                                    placeholder="Select Algorithm" options={forecastAlgorithmOptions}
                                                    disabled>
                                                </lightning-combobox>
                                            </lightning-layout-item>
                                            <lightning-layout-item size="12" medium-device-size="6"
                                                class="slds-align-bottom">
                                                <template if:true={hasForecastData}>
                                                    <lightning-button label="Download Forecast (CSV)"
                                                        onclick={downloadSpendForecastAsCSV} variant="brand">
                                                    </lightning-button>
                                                </template>
                                            </lightning-layout-item>
                                        </lightning-layout>
                                    </div>
                                </div>

                                <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12">
                                    <div class="chart-panel slds-m-around_medium">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <lightning-icon icon-name="action:approval"
                                                    alternative-text="On-Time Delivery" size="x-small"></lightning-icon>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="description">On-Time Delivery Analysis</p>
                                            </div>
                                        </div>
                                        <canvas class="on-time-delivery-chart" lwc:dom="manual"></canvas>
                                    </div>
                                </div>

                                <div
                                    class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12">
                                    <div class="chart-panel slds-m-around_medium">
                                        <div class="slds-media slds-media_center">
                                            <div class="slds-media__figure">
                                                <lightning-icon icon-name="action:announcement"
                                                    alternative-text="Quality Analysis" size="x-small"></lightning-icon>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="description">Quality Analysis</p>
                                            </div>
                                        </div>
                                        <canvas class="quality-analysis-chart" lwc:dom="manual"></canvas>
                                        <div class="quality-summary"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>

                <!-- supply over view -->
                <template if:true={isSupplyOverview}>

                    <lightning-card class="maq">
                        <div slot="title" class="slds-m-right_medium">
                            <lightning-icon icon-name="standard:date_input" size="small"></lightning-icon>
                            <a href="#" class="slds-card__header-link slds-truncate slds-m-left_small"
                                title="Supply Planning Overview">
                                Supply Planning Overview
                            </a>
                        </div>

                        <lightning-layout multiple-rows class="slds-p-around_small">

                            <!-- üéØ LEFT: Filter + Action Panel (Sticky) -->
                            <lightning-layout-item size="12" medium-device-size="5" large-device-size="4"
                                class="left-panel">
                                <div class="slds-box slds-theme_default">
                                    <h3 class="slds-text-heading_small slds-m-bottom_small">üîß Actions & Filters</h3>

                                    <!-- üîç Product Lookup -->
                                    <div class="slds-m-bottom_small">
                                        <label class="slds-form-element__label">Search Product</label>
                                        <c-custom-input-lookup-l-w-c obj-name="Product2"
                                            search-placeholder="Search product" icon-name="standard:product"
                                            selected-value={inventoryProduct.Id} selected-name={inventoryProduct.Name}
                                            onlookupselected={handleINVProductSelected}>
                                        </c-custom-input-lookup-l-w-c>
                                    </div>

                                    <!-- üìÜ Year Type -->
                                    <template if:true={isProductSelected}>
                                        <div class="slds-m-bottom_medium">
                                            <div class="slds-text-heading_small slds-m-bottom_small">
                                                <b>Select Year Type</b>
                                            </div>
                                            <div class="year-toggle-button-group">
                                                <button class={fiscalButtonClass} onclick={selectFiscalYear}
                                                    style="border-radius: 10px 0px 0px 10px;">Fiscal Year</button>
                                                <button class={customButtonClass} onclick={selectCustomYear}
                                                    style="border-radius: 0px 10px 10px 0px;">Custom Year (Jan -
                                                    Dec)</button>
                                            </div>
                                        </div>
                                    </template>

                                    <!-- üìÖ From / To Date -->
                                    <template if:false={showDateFilters}>
                                        <lightning-input class="slds-m-bottom_small" type="date" label="From Date"
                                            value={fromDate} onchange={handleFromDateChange} disabled>
                                        </lightning-input>
                                        <lightning-input class="slds-m-bottom_small" type="date" label="To Date"
                                            value={toDate} onchange={handleToDateChange} disabled>
                                        </lightning-input>
                                    </template>

                                    <template if:true={showCustomYearSelector}>
                                        <div class="slds-col slds-m-bottom_large">
                                            <div class="custom-year-selector-inline">
                                                <div class="slds-grid slds-grid_align-spread slds-m-bottom_x-small">
                                                    <span class="slds-text-title_bold">Selected Year</span>
                                                    <span class="slds-text-body_regular">{selectedCustomYear}</span>
                                                </div>
                                                <input id="yearSlider" type="range" min={minCustomYear}
                                                    max={maxCustomYear} value={selectedCustomYear}
                                                    oninput={handleCustomYearSliderChange} class="slds-range" />
                                            </div>
                                        </div>
                                    </template>

                                    <div class="slds-grid slds-align-center slds-wrap">
                                        <!-- üîç Search Button -->
                                        <div
                                            class="slds-col slds-size_12-of-12 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-text-align_center slds-p-right_small">
                                            <div class="buttonWrapper">
                                                <lightning-button variant="brand" label="Search"
                                                    onclick={handleSearchClick}></lightning-button>
                                            </div>
                                        </div>

                                        <!-- üì¶ Create PO -->
                                        <div
                                            class="slds-col slds-size_12-of-12 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-text-align_center slds-p-right_small">
                                            <div class="buttonWrapper">
                                                <lightning-button variant="neutral" icon-name="utility:description"
                                                    label="Create PO" onclick={handleCreatePO}></lightning-button>
                                            </div>
                                        </div>

                                        <!-- üì• Download Forecast CSV -->
                                        <div
                                            class="slds-col slds-size_12-of-12 slds-text-align_center slds-m-top_small">
                                            <template if:true={isProductSelected}>
                                                <div class="buttonWrapper">
                                                    <lightning-button label="Download Forecast (CSV)" variant="success"
                                                        onclick={downloadSupplyDemandForecastAsCSV}
                                                        class="slds-m-top_small">
                                                    </lightning-button>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                            </lightning-layout-item>


                            <!-- üéØ RIGHT: Scrollable Content Area -->
                            <lightning-layout-item size="12" medium-device-size="9" large-device-size="8"
                                class="right-scroll-panel">
                                <div class="scrollable-content">

                                    <!-- üìà 1. Supply & Projected Demand -->
                                    <lightning-card class="maq slds-m-bottom_medium">
                                        <div slot="title">
                                            <lightning-icon icon-name="standard:code_set_bundle"
                                                size="small"></lightning-icon>
                                            <a href="#" class="slds-card__header-link slds-truncate slds-m-left_small"
                                                title="Projected Supply vs Demand">
                                                Supply & Projected Demand
                                            </a>
                                        </div>

                                        <div class="slds-card__body slds-card__body_inner chart-container">
                                            <template if:true={isProductSelected}>
                                                <canvas class="supply-forecast-chart" lwc:dom="manual"></canvas>
                                            </template>

                                            <template if:false={isProductSelected}>
                                                <canvas class="main-chart" lwc:dom="manual"></canvas>
                                            </template>
                                        </div>
                                    </lightning-card>

                                    <!-- üìä 2. Breakdown by Distribution -->
                                    <lightning-card class="maq slds-m-bottom_medium">
                                        <div slot="title">
                                            <lightning-icon icon-name="standard:code_set_bundle"
                                                size="small"></lightning-icon>
                                            <a href="#" class="slds-card__header-link slds-truncate slds-m-left_small"
                                                title="Breakdown by Distribution Channel & Region">
                                                Breakdown by Distribution Channel & Region
                                            </a>
                                        </div>

                                        <div class="slds-card__body slds-card__body_inner chart-container">
                                            <template if:true={isProductSelected}>
                                                <template if:true={countrySupplyDemandData}>
                                                    <canvas class="breakdown-placeholder-chart"
                                                        lwc:dom="manual"></canvas>
                                                    <h3 class="description slds-m-top_medium">üåê Country-Level Supply &
                                                        Demand Breakdown </h3>
                                                    <ul class="metrics-list">
                                                        <template for:each={countrySupplyDemandData} for:item="item">
                                                            <li key={item.country}>
                                                                <strong>{item.country} : </strong>
                                                                Supply : {item.totalSupply}, Demand : {item.totalDemand}
                                                            </li>
                                                        </template>
                                                    </ul>
                                                </template>


                                                <!-- abuzar -->

                                                <!-- manufacturing price details  -->

                                                <template if:false={showMoDetails}>

                                                    <template if:true={hasManufacturingPriceData}>
                                                        <lightning-card class="maq slds-m-bottom_medium">
                                                            <div slot="title">
                                                                <lightning-icon icon-name="standard:work_order"
                                                                    size="small"></lightning-icon>
                                                                <a href="#"
                                                                    class="slds-card__header-link slds-truncate slds-m-left_small"
                                                                    title="Manufacturing Unit Cost Stats">
                                                                    Manufacturing Unit Cost Stats
                                                                </a>
                                                            </div>

                                                            <table
                                                                class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Month/Year</th>
                                                                        <th>Avg Unit Cost</th>
                                                                        <th>Min Unit Cost</th>
                                                                        <th>Max Unit Cost</th>
                                                                        <th>Avg Duration (days)</th>
                                                                        <th>Avg Delay (days)</th>
                                                                        <th>Total MOs</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <template for:each={summaryPager.mfg.paged}
                                                                        for:item="row">
                                                                        <tr key={row.key}>
                                                                            <td>{row.month}/{row.year}</td>
                                                                            <td>{row.avgPrice}</td>
                                                                            <td>{row.minPrice}</td>
                                                                            <td>{row.maxPrice}</td>
                                                                            <td>{row.avgDuration}</td>
                                                                            <td>{row.avgDelay}</td>
                                                                            <td>
                                                                                <button
                                                                                    class="slds-button slds-button_reset slds-text-link"
                                                                                    data-key={row.key} title="View MOs"
                                                                                    onclick={handleTotalMOClick}>
                                                                                    {row.totalCount}
                                                                                </button>
                                                                            </td>
                                                                        </tr>
                                                                    </template>
                                                                </tbody>
                                                            </table>
                                                            <!-- Pager -->
                                                            <div
                                                                class="slds-m-around_medium slds-align_absolute-center">
                                                                <lightning-button label="Prev"
                                                                    onclick={handlePrevPageSummary} data-key="mfg"
                                                                    disabled={summaryPager.mfg.isFirst}>
                                                                </lightning-button>
                                                                <span class="slds-m-horizontal_small">
                                                                    Page {summaryPager.mfg.currentPage} of
                                                                    {summaryPager.mfg.totalPages}
                                                                    &nbsp;‚Ä¢&nbsp; Showing
                                                                    {summaryPager.mfg.from}-{summaryPager.mfg.to}
                                                                    of {summaryPager.mfg.total}
                                                                </span>
                                                                <lightning-button label="Next"
                                                                    onclick={handleNextPageSummary} data-key="mfg"
                                                                    disabled={summaryPager.mfg.isLast}>
                                                                </lightning-button>
                                                            </div>
                                                        </lightning-card>
                                                    </template>
                                                </template>


                                                <!-- opens the modal in which the mo details are there  -->

                                                <template if:true={showMoDetails}>
                                                    <section class="ax-fullscreen">
                                                        <header
                                                            class="ax-header slds-grid slds-grid_align-spread slds-p-around_small slds-align_absolute-center">
                                                            <div class="ax-back-icon" onclick={goBack}>
                                                                <lightning-icon icon-name="utility:back" size="small"
                                                                    title="Back"
                                                                    titlalternative-text="Back"></lightning-icon>
                                                            </div>&nbsp;

                                                            <h2
                                                                class="ax-title slds-text-heading_medium slds-text-align_center slds-truncate">
                                                                Manufacturing Orders ‚Äî
                                                                {selectedRowMo.month}/{selectedRowMo.year}
                                                            </h2>

                                                            <!-- placeholder for spacing symmetry -->
                                                            <div style="width: 1.5rem;"></div>
                                                        </header>

                                                        <div class="ax-content slds-p-around_medium">
                                                            <!-- Completed -->
                                                            <div class="status-block">
                                                                
                                                                <template
                                                                    if:true={selectedRowMo.completeMODetails.length}>
                                                                    <h3 class="slds-text-title_caps slds-m-bottom_small">
                                                                    Completed ({selectedRowMo.completedCount})
                                                                </h3>
                                                                    <table
                                                                        class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>MO Name</th>
                                                                                <th>Product</th>
                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="complete"
                                                                                    data-id="StartDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="Start">Start
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="complete"
                                                                                    data-id="EndDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="End">End
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th>Duration (days)</th>
                                                                                <th>Cost</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template for:each={pagedComplete}
                                                                                for:item="mo">
                                                                                <tr key={mo.Id}>
                                                                                    <td>
                                                                                        <a href="javascript:void(0);"
                                                                                            data-id={mo.Id}
                                                                                            onclick={navigateToMO}>{mo.Name}</a>
                                                                                    </td>
                                                                                    <td>{mo.productName}</td>
                                                                                    <td>{mo.startDate}</td>
                                                                                    <td>{mo.endDate}</td>
                                                                                    <td>{mo.duration}</td>
                                                                                    <td>{mo.cost}</td>

                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>
                                                                    <!-- Pagination row -->
                                                                    <!-- Pager -->
                                                                    <div
                                                                        class="slds-m-around_medium slds-align_absolute-center">
                                                                        <lightning-button label="Prev"
                                                                            onclick={handlePrevPageMoPrice}
                                                                            data-status="complete"
                                                                            disabled={isFirstPageComplete}></lightning-button>
                                                                        <span class="slds-m-horizontal_small">
                                                                            Page {currentPageMoPrice.complete} of
                                                                            {totalPagesComplete}
                                                                            &nbsp;‚Ä¢&nbsp; Showing
                                                                            {completeFrom}-{completeTo} of
                                                                            {selectedRowMo.completeMODetails.length}
                                                                        </span>
                                                                        <lightning-button label="Next"
                                                                            onclick={handleNextPageMoPrice}
                                                                            data-status="complete"
                                                                            disabled={isLastPageComplete}>
                                                                        </lightning-button>
                                                                    </div>

                                                                </template>
                                                                <!-- <template
                                                                    if:false={selectedRowMo.completeMODetails.length}>No
                                                                    MOs</template> -->
                                                            </div>

                                                            <!-- In Progress -->
                                                            <div class="status-block">
                                                                
                                                                <template
                                                                    if:true={selectedRowMo.inProgressMODetails.length}>
                                                                    <h3 class="slds-text-title_caps slds-m-bottom_small">
                                                                    In Progress ({selectedRowMo.inProgressCount})
                                                                </h3>
                                                                    <table
                                                                        class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>MO Name</th>
                                                                                <th>Product</th>
                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="inProgress"
                                                                                    data-id="StartDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="Start">Start
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="inProgress"
                                                                                    data-id="EndDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="End">End
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th>Duration (days)</th>
                                                                                <th>Cost</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template for:each={pagedInProgress}
                                                                                for:item="mo">
                                                                                <tr key={mo.Id}>
                                                                                    <td>
                                                                                        <a href="javascript:void(0);"
                                                                                            data-id={mo.Id}
                                                                                            onclick={navigateToMO}>{mo.Name}</a>
                                                                                    </td>
                                                                                    <td>{mo.productName}</td>
                                                                                    <td>{mo.startDate}</td>
                                                                                    <td>{mo.endDate}</td>
                                                                                    <td>{mo.duration}</td>
                                                                                    <td>{mo.cost}</td>
                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>
                                                                    <!-- Pager: In Progress -->
                                                                    <div
                                                                        class="slds-m-around_medium slds-align_absolute-center">
                                                                        <lightning-button label="Prev"
                                                                            onclick={handlePrevPageMoPrice}
                                                                            data-status="inProgress"
                                                                            disabled={isFirstPageInProgress}>
                                                                        </lightning-button>

                                                                        <span class="slds-m-horizontal_small">
                                                                            Page {currentPageMoPrice.inProgress} of
                                                                            {totalPagesInProgress}
                                                                            &nbsp;‚Ä¢&nbsp; Showing
                                                                            {inProgressFrom}-{inProgressTo}
                                                                            of
                                                                            {selectedRowMo.inProgressMODetails.length}
                                                                        </span>

                                                                        <lightning-button label="Next"
                                                                            onclick={handleNextPageMoPrice}
                                                                            data-status="inProgress"
                                                                            disabled={isLastPageInProgress}>
                                                                        </lightning-button>
                                                                    </div>

                                                                </template>
                                                                <!-- <template
                                                                    if:false={selectedRowMo.inProgressMODetails.length}>No
                                                                    MOs</template> -->
                                                            </div>

                                                            <!-- Draft -->
                                                            <div class="status-block">
                                                                
                                                                <template if:true={selectedRowMo.draftMODetails.length}>
                                                                    <h3 class="slds-text-title_caps slds-m-bottom_small">
                                                                    Draft ({selectedRowMo.draftCount})
                                                                </h3>
                                                                    <table
                                                                        class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>MO Name</th>
                                                                                <th>Product</th>
                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="draft"
                                                                                    data-id="StartDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="Start">Start
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="draft"
                                                                                    data-id="EndDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="End">End
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th>Duration (days)</th>
                                                                                <th>Cost</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template for:each={pagedDraft}
                                                                                for:item="mo">
                                                                                <tr key={mo.Id}>
                                                                                    <td>
                                                                                        <a href="javascript:void(0);"
                                                                                            data-id={mo.Id}
                                                                                            onclick={navigateToMO}>{mo.Name}</a>
                                                                                    </td>
                                                                                    <td>{mo.productName}</td>
                                                                                    <td>{mo.startDate}</td>
                                                                                    <td>{mo.endDate}</td>
                                                                                    <td>{mo.duration}</td>
                                                                                    <td>{mo.cost}</td>
                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>

                                                                    <!-- Pager: Draft -->
                                                                    <div
                                                                        class="slds-m-around_medium slds-align_absolute-center">
                                                                        <lightning-button label="Prev"
                                                                            onclick={handlePrevPageMoPrice}
                                                                            data-status="draft"
                                                                            disabled={isFirstPageDraft}>
                                                                        </lightning-button>

                                                                        <span class="slds-m-horizontal_small">
                                                                            Page {currentPageMoPrice.draft} of
                                                                            {totalPagesDraft}
                                                                            &nbsp;‚Ä¢&nbsp; Showing {draftFrom}-{draftTo}
                                                                            of {selectedRowMo.draftMODetails.length}
                                                                        </span>

                                                                        <lightning-button label="Next"
                                                                            onclick={handleNextPageMoPrice}
                                                                            data-status="draft"
                                                                            disabled={isLastPageDraft}>
                                                                        </lightning-button>
                                                                    </div>

                                                                </template>
                                                                <!-- <template
                                                                    if:false={selectedRowMo.draftMODetails.length}>No
                                                                    MOs</template> -->
                                                            </div>

                                                            <!-- Cancelled -->
                                                            <div class="status-block">
                                                                
                                                                <template
                                                                    if:true={selectedRowMo.cancelledMODetails.length}>
                                                                    <h3 class="slds-text-title_caps slds-m-bottom_small">
                                                                    Cancelled ({selectedRowMo.cancelledCount})
                                                                </h3>
                                                                    <table
                                                                        class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>MO Name</th>
                                                                                <th>Product</th>
                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="cancelled"
                                                                                    data-id="StartDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="Start">Start
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="cancelled"
                                                                                    data-id="EndDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="End">End
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th>Duration (days)</th>
                                                                                <th>Cost</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template for:each={pagedCancelled}
                                                                                for:item="mo">
                                                                                <tr key={mo.Id}>
                                                                                    <td>
                                                                                        <a href="javascript:void(0);"
                                                                                            data-id={mo.Id}
                                                                                            onclick={navigateToMO}>{mo.Name}</a>
                                                                                    </td>
                                                                                    <td>{mo.productName}</td>
                                                                                    <td>{mo.startDate}</td>
                                                                                    <td>{mo.endDate}</td>
                                                                                    <td>{mo.duration}</td>
                                                                                    <td>{mo.cost}</td>
                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>
                                                                    <!-- Pager: Cancelled -->
                                                                    <div
                                                                        class="slds-m-around_medium slds-align_absolute-center">
                                                                        <lightning-button label="Prev"
                                                                            onclick={handlePrevPageMoPrice}
                                                                            data-status="cancelled"
                                                                            disabled={isFirstPageCancelled}>
                                                                        </lightning-button>

                                                                        <span class="slds-m-horizontal_small">
                                                                            Page {currentPageMoPrice.cancelled} of
                                                                            {totalPagesCancelled}
                                                                            &nbsp;‚Ä¢&nbsp; Showing
                                                                            {cancelledFrom}-{cancelledTo}
                                                                            of {selectedRowMo.cancelledMODetails.length}
                                                                        </span>

                                                                        <lightning-button label="Next"
                                                                            onclick={handleNextPageMoPrice}
                                                                            data-status="cancelled"
                                                                            disabled={isLastPageCancelled}>
                                                                        </lightning-button>
                                                                    </div>

                                                                </template>
                                                                <!-- <template
                                                                    if:false={selectedRowMo.cancelledMODetails.length}>No
                                                                    MOs</template> -->
                                                            </div>

                                                            <!-- Release -->
                                                            <div class="status-block">
                                                               
                                                                <template
                                                                    if:true={selectedRowMo.releaseMODetails.length}>
                                                                     <h3 class="slds-text-title_caps slds-m-bottom_small">
                                                                    Release ({selectedRowMo.releaseCount})
                                                                </h3>
                                                                    <table
                                                                        class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>MO Name</th>
                                                                                <th>Product</th>
                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="release"
                                                                                    data-id="StartDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="Start">Start
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th class="slds-is-sortable slds-is-resizable cursor-pointer"
                                                                                    scope="col" onclick={sortByMo}
                                                                                    data-status="release"
                                                                                    data-id="EndDate">
                                                                                    <span class="slds-truncate"
                                                                                        title="End">End
                                                                                        &nbsp;<lightning-icon
                                                                                            icon-name="utility:sort"
                                                                                            size="xx-small"></lightning-icon>
                                                                                    </span>
                                                                                </th>

                                                                                <th>Duration (days)</th>
                                                                                <th>Cost</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template for:each={pagedRelease}
                                                                                for:item="mo">
                                                                                <tr key={mo.Id}>
                                                                                    <td>
                                                                                        <a href="javascript:void(0);"
                                                                                            data-id={mo.Id}
                                                                                            onclick={navigateToMO}>{mo.Name}</a>
                                                                                    </td>
                                                                                    <td>{mo.productName}</td>
                                                                                    <td>{mo.startDate}</td>
                                                                                    <td>{mo.endDate}</td>
                                                                                    <td>{mo.duration}</td>
                                                                                    <td>{mo.cost}</td>
                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>
                                                                    <!-- Pager: Release -->
                                                                    <div
                                                                        class="slds-m-around_medium slds-align_absolute-center">
                                                                        <lightning-button label="Prev"
                                                                            onclick={handlePrevPageMoPrice}
                                                                            data-status="release"
                                                                            disabled={isFirstPageRelease}>
                                                                        </lightning-button>

                                                                        <span class="slds-m-horizontal_small">
                                                                            Page {currentPageMoPrice.release} of
                                                                            {totalPagesRelease}
                                                                            &nbsp;‚Ä¢&nbsp; Showing
                                                                            {releaseFrom}-{releaseTo}
                                                                            of {selectedRowMo.releaseMODetails.length}
                                                                        </span>

                                                                        <lightning-button label="Next"
                                                                            onclick={handleNextPageMoPrice}
                                                                            data-status="release"
                                                                            disabled={isLastPageRelease}>
                                                                        </lightning-button>
                                                                    </div>

                                                                </template>
                                                                <!-- <template
                                                                    if:false={selectedRowMo.releaseMODetails.length}>No
                                                                    MOs</template> -->
                                                            </div>
                                                        </div>
                                                        <!-- Footer -->
                                                        <footer
                                                            class="ax-footer  slds-p-around_small slds-grid slds-grid_align-end">
                                                            <lightning-button variant="neutral" label="Back"
                                                                onclick={goBack}></lightning-button>
                                                        </footer>
                                                    </section>
                                                </template>




                                                <template if:false={showMoDetails}>

                                                    <!-- üßæ Sales Price Stats -->
<template if:true={salesPriceData.length}>
  <lightning-card class="maq slds-m-bottom_medium">
    <div slot="title">
      <lightning-icon icon-name="standard:product_consumed" size="small"></lightning-icon>
      <a href="#"
         class="slds-card__header-link slds-truncate slds-m-left_small"
         title="Sales Price Stats">
        Sales Price Stats
      </a>
    </div>

    <table class="slds-table slds-table_cell-buffer slds-table_bordered">
      <thead>
        <tr>
          <th>Month/Year</th>
          <th>Avg Price</th>
          <th>Min Price</th>
          <th>Max Price</th>
          <th>Total SOs</th>
        </tr>
      </thead>
      <tbody>
        <template for:each={summaryPager.sales.paged} for:item="row">
          <tr key={row.key}>
            <td>{row.month}/{row.year}</td>
            <td>{row.avgPrice}</td>
            <td>{row.minPrice}</td>
            <td>{row.maxPrice}</td>
            <td>
              <button class="slds-button slds-button_reset slds-text-link"
                      title="View Sales Orders"
                      data-key={row.key}
                      onclick={handleTotalSOClick}>
                {row.totalSOCount}
              </button>
            </td>
          </tr>
        </template>
      </tbody>
    </table>

    <!-- Summary pager (you already have summaryPager.*) -->
    <div class="slds-m-around_medium slds-align_absolute-center">
      <lightning-button label="Prev"
                        onclick={handlePrevPageSummary}
                        data-key="sales"
                        disabled={summaryPager.sales.isFirst}>
      </lightning-button>
      <span class="slds-m-horizontal_small">
        Page {summaryPager.sales.currentPage} of {summaryPager.sales.totalPages}
        &nbsp;‚Ä¢&nbsp; Showing {summaryPager.sales.from}-{summaryPager.sales.to} of {summaryPager.sales.total}
      </span>
      <lightning-button label="Next"
                        onclick={handleNextPageSummary}
                        data-key="sales"
                        disabled={summaryPager.sales.isLast}>
      </lightning-button>
    </div>
  </lightning-card>
</template>



<!-- üìÑ Full-page Sales Orders -->
<template if:true={showSoDetails}>
  <section class="ax-fullscreen">
    <!-- Header -->
    <header class="ax-header slds-grid slds-grid_align-spread slds-p-around_small slds-border_bottom">
      <div class="slds-grid slds-grid_vertical-align-center slds-size_1-of-1">
        <div class="ax-back-icon" onclick={goBack}>
          <lightning-icon icon-name="utility:back" size="small" title="Back" alternative-text="Back"></lightning-icon>
        </div>
        <h2 class="ax-title slds-text-heading_medium slds-text-align_center slds-truncate slds-m-left_small slds-m-right_small slds-col_bump-left">
          Sales Orders ‚Äî {selectedRowSo.month}/{selectedRowSo.year}
        </h2>
      </div>
    </header>

    <div class="ax-content slds-p-around_medium">
      <!-- Reusable table header for SO lists -->
      <template for:each={soSections} for:item="sec">
        <div key={sec.key} class="status-block slds-m-bottom_large">
          

          <template if:true={sec.listLength}>
            <h3 class="slds-text-title_caps slds-m-bottom_small">
            {sec.title} ({sec.count})
          </h3>
            <table class="slds-table slds-table_cell-buffer slds-table_bordered">
  <thead>
    <tr>
      <th>Order Name</th>
      <!-- <th>Order Number</th> -->
      <th>Customer (Account)</th>

      <!-- Sortable Effective Date -->
      <th class="slds-is-sortable slds-is-resizable cursor-pointer"
          scope="col"
          onclick={sortBySo}
          data-status={sec.key}
          data-id="EffectiveDate">
        <span class="slds-truncate" title="Effective Date">
          Order Start Date&nbsp;
          <lightning-icon icon-name="utility:sort" size="xx-small"></lightning-icon>
        </span>
      </th>

      <th>Expected Date</th>
      <!-- <th>Sub Total</th> -->
      <th>Order Amount</th>
    </tr>
  </thead>

  <tbody>
    <template for:each={sec.paged} for:item="so">
      <tr key={so.Id}>
        <!-- Order Name (navigate to Order) -->
        <td>
          <a href="javascript:void(0);"
             data-id={so.orderId}
             data-object="Order"
             onclick={navigateToMO}>
            {so.OrderNumber}
          </a>
        </td>

        <!-- Order Number -->
        <!-- <td>{so.OrderNumber}</td> -->

        <!-- Customer (Account Name) -->
        <td>{so.AccountName}</td>

        <!-- Dates -->
        <td>{so.effectiveDateFormatted}</td>
        <td>{so.expectedDateFormatted}</td>

        <!-- Money -->
        <!-- <td>{so.subTotalFormatted}</td> -->
        <td>{so.orderAmountFormatted}</td>
      </tr>
    </template>
  </tbody>
</table>


            <!-- Pager for this status -->
            <div class="slds-m-around_medium slds-align_absolute-center">
              <lightning-button label="Prev"
                                onclick={handlePrevPageSo}
                                data-status={sec.key}
                                disabled={sec.isFirst}>
              </lightning-button>
              <span class="slds-m-horizontal_small">
                Page {sec.currentPage} of {sec.totalPages}
                &nbsp;‚Ä¢&nbsp; Showing {sec.from}-{sec.to} of {sec.total}
              </span>
              <lightning-button label="Next"
                                onclick={handleNextPageSo}
                                data-status={sec.key}
                                disabled={sec.isLast}>
              </lightning-button>
            </div>
          </template>

          <!-- <template if:false={sec.listLength}>No Orders</template> -->
        </div>
      </template>
    </div>

    <footer class="ax-footer slds-p-around_small slds-grid slds-grid_align-center slds-border_top">
      <lightning-button variant="neutral" label="Back" onclick={goBack}></lightning-button>
    </footer>
  </section>
</template>




                                                    <!-- üõí Purchase Price Stats -->
                                                    <template if:true={purchasePriceData.length}>
                                                        <lightning-card class="maq slds-m-bottom_medium">
                                                            <div slot="title">
                                                                <lightning-icon icon-name="standard:product_required"
                                                                    size="small"></lightning-icon>
                                                                <a href="#"
                                                                    class="slds-card__header-link slds-truncate slds-m-left_small"
                                                                    title="Purchase Price Stats">
                                                                    Purchase Price Stats
                                                                </a>
                                                            </div>

                                                            <table
                                                                class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Month/Year</th>
                                                                        <th>Avg Price</th>
                                                                        <th>Min Price</th>
                                                                        <th>Max Price</th>
                                                                        <th>Total POs</th> <!-- NEW -->
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <template for:each={summaryPager.purchase.paged}
                                                                        for:item="row">
                                                                        <tr key={row.key}>
                                                                            <td>{row.month}/{row.year}</td>
                                                                            <td>{row.avgPrice}</td>
                                                                            <td>{row.minPrice}</td>
                                                                            <td>{row.maxPrice}</td>
                                                                            <!-- Click to open full-page PO view for that month -->
                                                                            <td>
                                                                                <a href="javascript:void(0);"
                                                                                    data-key={row.key}
                                                                                    onclick={handleTotalPOClick}>
                                                                                    {row.totalPOCount}
                                                                                </a>
                                                                            </td>
                                                                        </tr>
                                                                    </template>
                                                                </tbody>
                                                            </table>
                                                            <div
                                                                class="slds-m-around_medium slds-align_absolute-center">
                                                                <lightning-button label="Prev"
                                                                    onclick={handlePrevPageSummary} data-key="purchase"
                                                                    disabled={summaryPager.purchase.isFirst}>
                                                                </lightning-button>
                                                                <span class="slds-m-horizontal_small">
                                                                    Page {summaryPager.purchase.currentPage} of
                                                                    {summaryPager.purchase.totalPages}
                                                                    &nbsp;‚Ä¢&nbsp; Showing
                                                                    {summaryPager.purchase.from}-{summaryPager.purchase.to}
                                                                    of {summaryPager.purchase.total}
                                                                </span>
                                                                <lightning-button label="Next"
                                                                    onclick={handleNextPageSummary} data-key="purchase"
                                                                    disabled={summaryPager.purchase.isLast}>
                                                                </lightning-button>
                                                            </div>
                                                        </lightning-card>
                                                    </template>

                                                    <!-- Full-page PO details -->
                                                    <template if:true={showPoDetails}>
                                                        <section class="ax-fullscreen">
                                                            <!-- Header -->
                                                            <header
                                                                class="ax-header slds-grid slds-grid_align-spread slds-p-around_small slds-border_bottom">
                                                                <div class="slds-grid slds-grid_vertical-align-center">
                                                                    <div class="ax-back-icon" onclick={goBack}>
                                                                        <lightning-icon icon-name="utility:back"
                                                                            size="small" title="Back"
                                                                            titlalternative-text="Back"></lightning-icon>
                                                                    </div>&nbsp;
                                                                    <h2
                                                                        class="ax-title slds-text-heading_medium slds-text-align_center slds-truncate">
                                                                        Purchase Orders ‚Äî
                                                                        {selectedRowPo.month}/{selectedRowPo.year}
                                                                    </h2>
                                                                </div>
                                                            </header>

                                                            <!-- Content -->
                                                            <div class="ax-content slds-p-around_medium">
                                                                <!-- Helper to render a status section -->


                                                                <!-- Draft -->
                                                                <div class="status-block slds-m-bottom_large">
                                                                    <template
                                                                        if:true={selectedRowPo.poDraftList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Draft ({selectedRowPo.poDraftList.length})
                                                                        </h3>

                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template for:each={poPager.draft.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>

                                                                        <!-- Pager for Draft -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="draft"
                                                                                disabled={isFirstPagePoDraft}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {currentPagePoPrice.draft} of
                                                                                {totalPagesPoDraft}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {draftFrom}-{draftTo} of
                                                                                {selectedRowPo.poDraftList.length}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="draft"
                                                                                disabled={isLastPagePoDraft}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poDraftList.length}>No
                                                                        POs</template> -->
                                                                </div>


                                                                <!-- logged  -->


                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poLoggedList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Logged ({selectedRowPo.poLoggedList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.logged.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="logged"
                                                                                disabled={poPager.logged.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager.logged.currentPage} of
                                                                                {poPager.logged.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.logged.from}-{poPager.logged.to}
                                                                                of {poPager.logged.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="Logged"
                                                                                disabled={poPager.Logged.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poLoggedList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- Assigned -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poAssignedList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Assigned
                                                                            ({selectedRowPo.poAssignedList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.assigned.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        

                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="assigned"
                                                                                disabled={poPager.assigned.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager.assigned.currentPage} of
                                                                                {poPager.assigned.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.assigned.from}-{poPager.assigned.to}
                                                                                of {poPager.assigned.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="assigned"
                                                                                disabled={poPager.assigned.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poAssignedList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- Approved -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poApprovedList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Approved
                                                                            ({selectedRowPo.poApprovedList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.approved.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->


                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="approved"
                                                                                disabled={poPager.approved.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager.approved.currentPage} of
                                                                                {poPager.approved.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.approved.from}-{poPager.approved.to}
                                                                                of {poPager.approved.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="approved"
                                                                                disabled={poPager.approved.isLast}>
                                                                            </lightning-button>
                                                                        </div>

                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poApprovedList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- Rejected -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poRejectedList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Rejected
                                                                            ({selectedRowPo.poRejectedList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.rejected.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="rejected"
                                                                                disabled={poPager.rejected.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager.rejected.currentPage} of
                                                                                {poPager.rejected.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.rejected.from}-{poPager.rejected.to}
                                                                                of {poPager.rejected.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="rejected"
                                                                                disabled={poPager.rejected.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poRejectedList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- In Progress -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poInProgressList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            In Progress
                                                                            ({selectedRowPo.poInProgressList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.inProgress.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="inProgress"
                                                                                disabled={poPager.inProgress.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager.inProgress.currentPage} of
                                                                                {poPager.inProgress.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.inProgress.from}-{poPager.inProgress.to}
                                                                                of {poPager.inProgress.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="inProgress"
                                                                                disabled={poPager.inProgress.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poInProgressList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- Booked -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poBookedList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Booked ({selectedRowPo.poBookedList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>


                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.booked.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="booked"
                                                                                disabled={poPager.booked.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager.booked.currentPage} of
                                                                                {poPager.booked.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.booked.from}-{poPager.booked.to}
                                                                                of {poPager.booked.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="booked"
                                                                                disabled={poPager.booked.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poBookedList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- Closed -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poClosedList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Closed ({selectedRowPo.poClosedList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>


                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.closed.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="closed"
                                                                                disabled={poPager.closed.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager.closed.currentPage} of
                                                                                {poPager.closed.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.closed.from}-{poPager.closed.to}
                                                                                of {poPager.closed.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="closed"
                                                                                disabled={poPager.closed.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poClosedList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- Cancelled -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poCancelledList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Cancelled
                                                                            ({selectedRowPo.poCancelledList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.cancelled.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="cancelled"
                                                                                disabled={poPager.cancelled.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager.cancelled.currentPage} of
                                                                                {poPager.cancelled.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.cancelled.from}-{poPager.cancelled.to}
                                                                                of {poPager.cancelled.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="cancelled"
                                                                                disabled={poPager.cancelled.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poCancelledList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- Supplier Accepted -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poSupplierAcceptedList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Supplier Accepted
                                                                            ({selectedRowPo.poSupplierAcceptedList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.supplierAccepted.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="supplierAccepted"
                                                                                disabled={poPager.SupplierAccepted.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page
                                                                                {poPager.supplierAccepted.currentPage}
                                                                                of {poPager.supplierAccepted.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.supplierAccepted.from}-{poPager.supplierAccepted.to}
                                                                                of {poPager.supplierAccepted.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="supplierAccepted"
                                                                                disabled={poPager.SupplierAccepted.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poSupplierAcceptedList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- Reconciled -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poReconciledList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Reconciled
                                                                            ({selectedRowPo.poReconciledList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>


                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.reconciled.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="reconciled"
                                                                                disabled={poPager.reconciled.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager.reconciled.currentPage} of
                                                                                {poPager.reconciled.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.reconciled.from}-{poPager.reconciled.to}
                                                                                of {poPager.reconciled.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="reconciled"
                                                                                disabled={poPager.reconciled.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poReconciledList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- Submitted for Approval -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poSubmittedForApprovalList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            Submitted for Approval
                                                                            ({selectedRowPo.poSubmittedForApprovalList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.submittedForApproval.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status="submittedForApproval"
                                                                                disabled={poPager.submittedForApproval.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page
                                                                                {poPager.submittedForApproval.currentPage}
                                                                                of
                                                                                {poPager.submittedForApproval.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.submittedForApproval.from}-{poPager.submittedForApproval.to}
                                                                                of {poPager.submittedForApproval.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status="submittedForApproval"
                                                                                disabled={poPager.submittedForApproval.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poSubmittedForApprovalList.length}>No
                                                                        POs</template> -->
                                                                </div>

                                                                <!-- On Hold -->
                                                                <div class="status-block slds-m-bottom_large">

                                                                    <template
                                                                        if:true={selectedRowPo.poOnHoldList.length}>
                                                                        <h3
                                                                            class="slds-text-title_caps slds-m-bottom_small">
                                                                            On Hold
                                                                            ({selectedRowPo.poOnHoldList.length})
                                                                        </h3>
                                                                        <table
                                                                            class="slds-table slds-table_cell-buffer slds-table_bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>PO Name</th>
                                                                                    <!-- <th>Order Date</th> -->
                                                                                    <th class="slds-is-sortable cursor-pointer"
                                                                                        onclick={sortByPo}
                                                                                        data-status="draft">
                                                                                        <span class="slds-truncate"
                                                                                            title="Order Date">
                                                                                            Order Date
                                                                                            <lightning-icon
                                                                                                icon-name="utility:sort"
                                                                                                size="xx-small"></lightning-icon>
                                                                                        </span>
                                                                                    </th>

                                                                                    <th>Vendor</th>
                                                                                    <th>Total Amount</th>
                                                                                    <!-- <th>Organisation</th> -->
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <template
                                                                                    for:each={poPager.onHold.paged}
                                                                                    for:item="po">
                                                                                    <tr key={po.Id}>
                                                                                        <td><a href="javascript:void(0);"
                                                                                                data-id={po.Id}
                                                                                                data-object="PO__c"
                                                                                                onclick={navigateToMO}>{po.Name}</a>
                                                                                        </td>
                                                                                        <td>{po.orderDate}</td>
                                                                                        <td>{po.vendorName}</td>
                                                                                        <td>{po.totalAmountFormatted}
                                                                                        </td>
                                                                                        <!-- <td>{po.organisationName}</td> -->
                                                                                    </tr>
                                                                                </template>
                                                                            </tbody>
                                                                        </table>
                                                                        <!-- Pager  -->
                                                                        <div
                                                                            class="slds-m-around_medium slds-align_absolute-center">
                                                                            <lightning-button label="Prev"
                                                                                onclick={handlePrevPagePo}
                                                                                data-status=" onHold"
                                                                                disabled={poPager.onHold.isFirst}>
                                                                            </lightning-button>

                                                                            <span class="slds-m-horizontal_small">
                                                                                Page {poPager. onHold.currentPage} of
                                                                                {poPager.onHold.totalPages}
                                                                                &nbsp;‚Ä¢&nbsp; Showing
                                                                                {poPager.onHold.from}-{poPager.onHold.to}
                                                                                of {poPager.onHold.total}
                                                                            </span>

                                                                            <lightning-button label="Next"
                                                                                onclick={handleNextPagePo}
                                                                                data-status=" onHold"
                                                                                disabled={poPager.onHold.isLast}>
                                                                            </lightning-button>
                                                                        </div>
                                                                    </template>
                                                                    <!-- <template
                                                                        if:false={selectedRowPo.poOnHoldList.length}>No
                                                                        POs</template> -->
                                                                </div>



                                                            </div>

                                                            <!-- Footer -->
                                                            <footer
                                                                class="ax-footer slds-p-around_small slds-grid slds-grid_align-center slds-border_top">
                                                                <lightning-button variant="neutral" label="Back"
                                                                    onclick={goBack}></lightning-button>
                                                            </footer>
                                                        </section>
                                                    </template>
                                                </template>
                                            </template>


                                            <!-- If No Product Selected -->
                                            <template if:false={isProductSelected}>
                                                <canvas class="country-chart" lwc:dom="manual"></canvas>
                                            </template>
                                        </div>
                                    </lightning-card>
                                </div>
                            </lightning-layout-item>


                        </lightning-layout>
                    </lightning-card>

                </template>


                <!-- Stock Alerts Sub Tab -->
                <template if:true={isSafety}>
                    <!--h2 class="section-heading">Stock Alerts</h2-->
                    <!-- Filters -->
                    <div class="slds-grid slds-gutters slds-wrap slds-p-bottom_small">
                        <div
                            class="slds-col slds-size_1-of-1 slds-medium-size_2-of-12 slds-large-size_2-of-12 slds-p-right_small">
                            <c-custom-input-lookup-l-w-c obj-name="Site__c" search-placeholder="Search warehouse"
                                icon-name="standard:home" selected-value={selectedWarehouseForSafetyStock.Id}
                                selected-name={selectedWarehouseForSafetyStock.Name}
                                onlookupselected={handleWarehouseSaveForSafetyStock} filter={siteFilter}
                                onremove={handleSiteRemovedForSafety}
                                is-value-selected=true></c-custom-input-lookup-l-w-c>
                        </div>
                        <div
                            class="slds-col slds-size_1-of-1 slds-medium-size_2-of-12 slds-large-size_2-of-12 slds-p-right_small">
                            <c-custom-input-lookup-l-w-c obj-name="Product2" search-placeholder="Search product"
                                icon-name="standard:product" selected-value={selectedProduct.Id}
                                selected-name={selectedProduct.Name} onlookupselected={handleSafetyStockProductSelected}
                                onremove={handleSafetyProductRemove}></c-custom-input-lookup-l-w-c>
                        </div>
                        <div
                            class="slds-col slds-size_1-of-1 slds-medium-size_2-of-12 slds-large-size_2-of-12 slds-p-right_small">
                            <template if:true={isWarehouseSelectedForsafetyStock}>
                                <c-custom-input-lookup-l-w-c obj-name="Location__c"
                                    search-placeholder="Search location" icon-name="standard:product"
                                    selected-value={selectedLocation.Id} selected-name={selectedLocation.Name}
                                    onlookupselected={handleLocationSelect} onremove={handleLocationRemove}
                                    filter={locationFilter}></c-custom-input-lookup-l-w-c>


                            </template>

                        </div>
                        <!-- Custom Button Group -->

                        <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12">
                            <div class="slds-grid slds-grid_align-end slds-m-bottom_small slds-m-left_small">
                                <div class="slds-button-group" role="group">
                                    <button class="slds-button slds-button_neutral" onclick={handleCreatePO}>
                                        <lightning-icon icon-name="utility:description" size="xx-small"
                                            class="slds-button__icon slds-button__icon_left"
                                            alternative-text="Create PO"></lightning-icon>
                                        Create PO</button>
                                    <button class="slds-button slds-button_neutral" onclick={handleCreateMO}>
                                        <lightning-icon icon-name="utility:description" size="xx-small"
                                            class="slds-button__icon slds-button__icon_left"
                                            alternative-text="Create MO"></lightning-icon>
                                        Create MO

                                    </button>
                                    <button class="slds-button slds-button_neutral" onclick={handleStockTakeNav}>
                                        <lightning-icon icon-name="utility:archive" size="xx-small"
                                            class="slds-button__icon slds-button__icon_left"
                                            alternative-text="Stock Take"></lightning-icon>
                                        Stock Take
                                    </button>
                                    <button class="slds-button slds-button_neutral" onclick={handleMoreOptions}>
                                        <lightning-icon icon-name="utility:down" size="xx-small"
                                            alternative-text="More"></lightning-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Chart -->
                    <lightning-card class="maq">
                        <!--div slot="title"><lightning-icon icon-name="standard:product" size="small" alternative-text="Overview" class="slds-m-right_small"></lightning-icon><a href="#" class="slds-card__header-link slds-truncate" title="Overview">
                                                Overview
                                            </a></div-->
                        <div class="slds-card__body slds-card__body_inner">
                            <template if:false={isWarehouseSelectedForsafetyStock}>
                                <div class="slds-illustration slds-illustration_large">
                                    <!-- Custom SVG Illustration -->
                                    <div class="custom-illustration">
                                        <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <g transform="translate(-73.000000, -110.000000)">
                                                    <g>
                                                        <g transform="translate(75.000000, 240.000000)">
                                                            <polyline vector-effect="non-scaling-stroke"
                                                                class="slds-illustration__stroke-secondary"
                                                                stroke-width="3" stroke-linecap="round"
                                                                stroke-linejoin="round"
                                                                transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) "
                                                                points="335.5 36 380 0 415 27"></polyline>
                                                            <polyline vector-effect="non-scaling-stroke"
                                                                class="slds-illustration__stroke-secondary"
                                                                stroke-width="3" stroke-linecap="round"
                                                                stroke-linejoin="round"
                                                                transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) "
                                                                points="303 18 313.5 9 346 36"></polyline>
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M0,36.5 L450,36.5"
                                                                class="slds-illustration__stroke-secondary"
                                                                stroke-width="3" stroke-linecap="round"></path>
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z"
                                                                class="slds-illustration__fill-secondary"></path>
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z"
                                                                class="slds-illustration__fill-secondary"
                                                                transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) ">
                                                            </path>
                                                        </g>
                                                        <g transform="translate(83.000000, 173.000000)"
                                                            class="slds-illustration__stroke-secondary"
                                                            stroke-linecap="round" stroke-width="3">
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13">
                                                            </path>
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5">
                                                            </path>
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M18,27.5 L83.0004985,27.5"></path>
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M0,27.5 L8,27.5"></path>
                                                        </g>
                                                        <g transform="translate(274.000000, 111.000000)"
                                                            class="slds-illustration__stroke-secondary"
                                                            stroke-linecap="round" stroke-width="3">
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13">
                                                            </path>
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5">
                                                            </path>
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M18,27.5 L83.0004985,27.5"></path>
                                                            <path vector-effect="non-scaling-stroke"
                                                                d="M0,27.5 L8,27.5"></path>
                                                        </g>
                                                        <g transform="translate(115.000000, 191.000000)">
                                                            <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)"
                                                                class="slds-illustration__fill-secondary">
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z">
                                                                </path>
                                                            </g>
                                                            <g transform="translate(0.000000, 18.000000)">
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z"
                                                                    class="slds-illustration__fill-primary"></path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404"
                                                                    class="slds-illustration__stroke-primary"
                                                                    stroke-width="4" stroke-linecap="round"
                                                                    stroke-linejoin="round"></path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M73,49.5 L88,49.5"
                                                                    class="slds-illustration__stroke-primary"
                                                                    stroke-width="3" stroke-linecap="round"></path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M211,49.5 L226,49.5"
                                                                    class="slds-illustration__stroke-primary"
                                                                    stroke-width="3" stroke-linecap="round"></path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z"
                                                                    class="slds-illustration__fill-primary"></path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M20,81.5 L390,81.5"
                                                                    class="slds-illustration__stroke-primary"
                                                                    stroke-width="3" stroke-linecap="round"></path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M0,81.5 L12,81.5"
                                                                    class="slds-illustration__stroke-primary"
                                                                    stroke-width="3" stroke-linecap="round"></path>
                                                            </g>
                                                        </g>
                                                        <g transform="translate(175.500000, 153.000000)">
                                                            <g transform="translate(0.000000, 7.000000)"
                                                                class="slds-illustration__fill-secondary">
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z">
                                                                </path>
                                                            </g>
                                                            <g class="slds-illustration__stroke-primary"
                                                                stroke-linecap="round" stroke-width="3">
                                                                <polygon vector-effect="non-scaling-stroke"
                                                                    stroke-linejoin="round"
                                                                    points="17 0.709590879 34 94.5 -1.82254212e-12 94.5">
                                                                </polygon>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z"
                                                                    stroke-linejoin="round"
                                                                    transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) ">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z"
                                                                    stroke-linejoin="round"></path>
                                                            </g>
                                                        </g>
                                                        <g transform="translate(307.500000, 135.000000)">
                                                            <g transform="translate(0.000000, 2.000000)"
                                                                class="slds-illustration__fill-secondary">
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z">
                                                                </path>
                                                            </g>
                                                            <g class="slds-illustration__stroke-primary"
                                                                stroke-linecap="round" stroke-width="3">
                                                                <polygon vector-effect="non-scaling-stroke"
                                                                    stroke-linejoin="round"
                                                                    points="29 0 56.572466 112.5 0 112.5"></polygon>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z"
                                                                    stroke-linejoin="round"
                                                                    transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) ">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z"
                                                                    stroke-linejoin="round"></path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z"
                                                                    stroke-linejoin="round"
                                                                    transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) ">
                                                                </path>
                                                            </g>
                                                        </g>
                                                        <g transform="translate(347.500000, 166.000000)">
                                                            <g transform="translate(0.000000, 4.000000)"
                                                                class="slds-illustration__fill-secondary">
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z">
                                                                </path>
                                                            </g>
                                                            <g class="slds-illustration__stroke-primary"
                                                                stroke-linecap="round" stroke-width="3">
                                                                <polygon vector-effect="non-scaling-stroke"
                                                                    stroke-linejoin="round"
                                                                    points="17 0.709590879 34 91.5 -1.82254212e-12 91.5">
                                                                </polygon>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z"
                                                                    stroke-linejoin="round"
                                                                    transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) ">
                                                                </path>
                                                            </g>
                                                        </g>
                                                        <g transform="translate(392.000000, 184.000000)"
                                                            class="slds-illustration__stroke-secondary"
                                                            stroke-linecap="round" stroke-width="3">
                                                            <g
                                                                transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663"
                                                                    transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) ">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318"
                                                                    transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) ">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318">
                                                                </path>
                                                                <path vector-effect="non-scaling-stroke"
                                                                    d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318"
                                                                    transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) ">
                                                                </path>
                                                            </g>
                                                        </g>
                                                    </g>
                                                </g>
                                            </g>
                                        </svg>
                                        <!-- For brevity, not repeating the entire SVG in this response -->
                                    </div>
                                    <div class="slds-text-longform">
                                        <p class="slds-text-body_regular">We couldn‚Äôt load your charts right now.</p>
                                    </div>
                                </div>
                            </template>
                            <div class="chart-container slds-m-bottom_medium" style="">
                                <template if:true={alertSummary}>
                                    <div class="slds-box slds-theme_default slds-m-bottom_small summary-container">
                                        <div class="slds-grid slds-wrap">
                                            <div class="slds-col slds-size_1-of-3 slds-text-color_error">
                                                üî¥ Critical: <strong>{alertSummary.critical}</strong>
                                            </div>
                                            <div class="slds-col slds-size_1-of-3 slds-text-color_warning">
                                                ‚ö†Ô∏è Reorder Needed: <strong>{alertSummary.reorder}</strong>
                                            </div>
                                            <div class="slds-col slds-size_1-of-3 slds-text-color_weak">
                                                ‚ùì Not Configured: <strong>{alertSummary.unconfigured}</strong>
                                            </div>
                                        </div>
                                    </div>
                                </template>

                                <template if:true={isWarehouseSelectedForsafetyStock}>
                                    <canvas lwc:dom="manual" class="chart-canvas" data-id="safetyStockChart"
                                        style="width: 100%; max-height: 500px;"></canvas>
                                </template>

                            </div>
                            <!-- Mini Table -->
                            <lightning-card>
                                <template if:true={isWarehouseSelectedForsafetyStock}>
                                    <div class="slds-text-heading_small slds-p-around_small">Stock Alert Overview</div>
                                    <lightning-datatable key-field="productName" data={pagedSafetyData}
                                        columns={stockTableColumns} hide-checkbox-column="true" sorted-by={sortBySafety}
                                        sorted-direction={sortDirectionSafety}
                                        onsort={handleSortSafety}></lightning-datatable>
                                </template>

                            </lightning-card>
                        </div>
                    </lightning-card>
                    <div class="slds-p-around_small slds-align_absolute-center">
                        <template if:true={isWarehouseSelectedForsafetyStock}>
                            <lightning-button label="Prev" onclick={handlePrevPageSafety}
                                disabled={isFirstPageSafety}></lightning-button>
                            <span class="slds-m-horizontal_small">Page {currentPageSafety} of {totalPagesSafety}</span>
                            <lightning-button label="Next" onclick={handleNextPageSafety}
                                disabled={isLastPageSafety}></lightning-button>
                        </template>
                    </div>
                </template>
            </div>
        </div>
    </div>

</template>