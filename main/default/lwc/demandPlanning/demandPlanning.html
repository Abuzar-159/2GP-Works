<template>
  <template if:true={isLoading}>
    <lightning-spinner alternative-text="Loading..." size="medium"></lightning-spinner>
  </template>
  <div class="vertical-tab-layout">
    <!-- Sidebar Tabs -->
    <div class="horizontal-tab-layout">
      <template if:true={isDemandTabOpen}>
        <div class="horizontal-tabs">
          <div class={demandTabClass} onclick={selectDemand}><lightning-icon icon-name='standard:digital_verification_config' alternative-text='digital_verification_config' size='small' title='digital_verification_config'></lightning-icon> Demand planning </div>
          <div class={customerPatternTabClass} onclick={selectCustomerPattern}> <lightning-icon icon-name='standard:user_role' alternative-text='user_role' size='small' title='user_role'></lightning-icon> Customer Patterns </div>
          <div class={simulationPlanningTabClass} onclick={selectSimulationPlanning}> <lightning-icon icon-name='standard:user_role' alternative-text='user_role' size='small' title='user_role'></lightning-icon> Simulation Planning </div>
        </div>
      </template>
      <template if:true={isInventoryTabOpen}>
        <div class="horizontal-tabs">
            <div class={inventoryTabClass} onclick={selectInventory}><lightning-icon icon-name='standard:asset_hierarchy' alternative-text='asset_hierarchy' size='small' title='asset_hierarchy'></lightning-icon> Inventory Overview</div>
            <div class={agingTabClass} onclick={selectAging}><lightning-icon icon-name='standard:date_time' alternative-text='date_time' size='small' title='date_time'></lightning-icon> Stock Aging </div>
            <div class={inventoryLevelTabClass} onclick={selectInventoryLevel}><lightning-icon icon-name='standard:contact_list' alternative-text='user_role' size='small' title='user_role'></lightning-icon> Material + WIP </div>
            <div class={stockMovementTabClass} onclick={selectStockMovement}><lightning-icon icon-name='standard:contact_list' alternative-text='user_role' size='small' title='user_role'></lightning-icon> Stock Movement </div>
        </div>
      </template>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      <template if:true={isRiskAndReturnTabOpen}>
        <div class="horizontal-tabs">
            <div class={riskAndReturnTabClass} onclick={selectRiskAndReturn}><lightning-icon icon-name='standard:asset_hierarchy' alternative-text='asset_hierarchy' size='small' title='asset_hierarchy'></lightning-icon> Product Return Insights</div>
            <div class={customerRARTabClass} onclick={selectCustomerRAR}><lightning-icon icon-name='standard:asset_hierarchy' alternative-text='asset_hierarchy' size='small' title='asset_hierarchy'></lightning-icon> Customer Return Insights</div>  
        </div>
      </template>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      <!-- Content Panel -->
      <div class="vertical-tab-content">
        <!-- Demand Planning Sub Tab -->
        <template if:true={isDemand}>
          
          <!--div class="slds-grid slds-wrap">
            <div class="slds-col slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12">
              <c-custom-input-lookup-l-w-c obj-name="Product2" search-placeholder="Search.." icon-name="standard:product" selected-value={selectedProduct.Id} selected-name={selectedProduct.Name} onlookupselected={handleProductSelected} onremove={handleDemandProdRemove} is-value-selected=true></c-custom-input-lookup-l-w-c>
            </div>
            <div class="slds-grid slds-grid_align-end slds-m-bottom_small slds-m-left_small">
                <lightning-button variant="brand" label="Create PO" onclick={handleCreatePO} class="slds-m-right_small"></lightning-button>
                <lightning-button variant="brand" label="Create MO" onclick={handleCreateMO} class="slds-m-right_small"></lightning-button>
                <lightning-button variant="brand" label="Stock take" onclick={handleStockTakeNav}></lightning-button>
            </div>
          </div-->
          
          <div class="slds-grid slds-wrap">
             <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-top_small">
                  
                     <lightning-card class="maq">
                        <div slot="title">
                        <lightning-icon icon-name="standard:code_set" size="small" alternative-text="Top 5 products" class="slds-m-right_small"></lightning-icon>
                        <a href="#" class="slds-card__header-link slds-truncate" title="Top 5 products "> Top 5 products  </a>
                        </div>
                    <div class="slds-card__body slds-card__body_inner">
                        <template if:false={isDemandProductSel}> 
                             <div class="slds-illustration slds-illustration_large">
                        <!-- Custom SVG Illustration -->
                        <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-73.000000, -110.000000)">
                              <g>
                                <g transform="translate(75.000000, 240.000000)">
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                                  <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                                  <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                                  <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                                </g>
                                <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(115.000000, 191.000000)">
                                  <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                    <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                                  </g>
                                  <g transform="translate(0.000000, 18.000000)">
                                    <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(175.500000, 153.000000)">
                                  <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(307.500000, 135.000000)">
                                  <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(347.500000, 166.000000)">
                                  <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                    <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                    <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                                  </g>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>

                        <div class="slds-text-longform">
                          <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                        </div>
                       
                        <div class="custom-illustration">
                           
                          <!-- For brevity, not repeating the entire SVG in this response -->
                        </div>
                        
                        
                        </div>
                      </template>
                        <template if:true={isDemandProductSel}>
                           <div class="chart-container">
                                <canvas lwc:dom="manual" class="chart-canvas" data-id="demandByProduct" width="400" height="300"></canvas>
                            </div>
                        </template>
                       
                    </div>
                    </lightning-card>
                  
            </div>
            </div>
            <div class="slds-grid slds-m-top_medium">
    <!-- Product Lookup -->
    <div class="slds-col slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12">
      <c-custom-input-lookup-l-w-c 
        obj-name="Product2" 
        search-placeholder="Search.." 
        icon-name="standard:product" 
        selected-value={selectedProduct.Id} 
        selected-name={selectedProduct.Name} 
        onlookupselected={handleProductSelected} 
        onremove={handleDemandProdRemove} 
        is-value-selected="true">
      </c-custom-input-lookup-l-w-c>
    </div>

    <!-- Custom Button Group -->
    <div class="slds-col slds-size_1-of-1 slds-medium-size_9-of-12 slds-large-size_9-of-12">
      <div class="slds-grid slds-grid_align-end slds-m-bottom_small slds-m-left_small">
        <div class="slds-button-group" role="group">
          <button class="slds-button slds-button_neutral" onclick={handleCreatePO}>
            <lightning-icon icon-name="utility:description" size="xx-small" class="slds-button__icon slds-button__icon_left" alternative-text="Create PO"></lightning-icon>
            Create PO</button>
          <button class="slds-button slds-button_neutral" onclick={handleCreateMO}>
            <lightning-icon icon-name="utility:description" size="xx-small" class="slds-button__icon slds-button__icon_left" alternative-text="Create MO"></lightning-icon>
            Create MO

          </button>
          <button class="slds-button slds-button_neutral" onclick={handleStockTakeNav}>
            <lightning-icon icon-name="utility:archive" size="xx-small" class="slds-button__icon slds-button__icon_left" alternative-text="Stock Take"></lightning-icon>
            Stock Take
            </button>
          <button class="slds-button slds-button_neutral" onclick={handleMoreOptions}>
            <lightning-icon icon-name="utility:down" size="xx-small" alternative-text="More"></lightning-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <div class="slds-grid ">
            <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-p-right_small slds-m-top_small">
                  
                     <lightning-card class="maq">
                         <div slot="title">
                      <lightning-icon icon-name="standard:budget" size="small" alternative-text="Monthly Demand" class="slds-m-right_small"></lightning-icon>
                      <a href="#" class="slds-card__header-link slds-truncate" title="Monthly Demand"> Demand for this year </a>
                    </div>
                    <!-- Forecasting Model & Simulate Button (Side by Side) -->
                  <lightning-layout class="slds-p-around_small slds-wrap">
                    <lightning-layout-item size="12" medium-device-size="6" class="slds-p-right_small">
                      <lightning-combobox
                        label="Forecasting Model"
                        value={selectedModel}
                        options={modelOptions}
                        onchange={handleModelChange}>
                      </lightning-combobox>
                    </lightning-layout-item>

                    <!-- <lightning-layout-item size="12" medium-device-size="6" class="slds-align-bottom">
                      <template if:false={simulationHasRun}>
                        <lightning-button
                          variant="brand"
                          label="Simulate Demand"
                          onclick={toggleSimulationPanel}>
                        </lightning-button>
                      </template>
                    </lightning-layout-item>
                    <lightning-layout-item size="12" medium-device-size="6" class="slds-p-right_small">
                      <lightning-button label="Evaluate Simulations" onclick={handleEvaluateSimulations} variant="brand" class="slds-m-top_small"> </lightning-button>
                    </lightning-layout-item> -->
                  </lightning-layout>

<!-- Main Card -->
<template if:true={isDemandProductSel}>
  <lightning-card>
    
    <!-- Buttons Row -->
    <!-- <template if:true={simulationHasRun}>
      <div class="slds-grid slds-wrap slds-p-around_small slds-grid_align-spread">
        
        
        <div class="slds-grid slds-wrap slds-grid_vertical-align-center">
            <div class="slds-size_12-of-12 slds-medium-size_5-of-12">
                <lightning-input 
                  label="File Name"
                  value={customFileName}
                  onchange={handleFileNameChange}
                  placeholder="Enter custom file name"
                  class="slds-m-right_small ">
                </lightning-input>
            </div>
            <div class="slds-size_12-of-12 slds-medium-size_7-of-12 slds-p-top_medium">  
              <lightning-button 
                label="Download Forecast (CSV)" 
                icon-name="utility:download" 
                onclick={downloadForecastAsCSV}>
              </lightning-button>
            </div>
            <div class="slds-size_12-of-12 slds-medium-size_7-of-12 slds-p-top_medium">  
              <lightning-button
                variant="neutral" label="Save Simulation" icon-name="utility:save" class="slds-m-left_small" onclick={handleSaveSimulation} disabled={isSavingSimulation}>
              </lightning-button>
            </div>
         
        </div>

        Right Side: Icon Buttons
        <div class="slds-grid slds-grid_align-end slds-grid_vertical-align-center slds-p-top_medium">
            <lightning-button-icon icon-name="utility:edit" variant="border-filled" alternative-text="Edit" class="slds-m-right_x-small icon-green" onclick={toggleSimulationPanel}></lightning-button-icon>
            <lightning-button-icon icon-name="utility:refresh" variant="border-filled" alternative-text="Reset" class="icon-red" onclick={resetSimulation}> </lightning-button-icon>
        </div>

      </div>
    </template> -->

    <!-- Inline Simulation Panel -->
     <template if:true={showSimulationPanel}>
            <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">
                    <header class="slds-modal__header">
                        <!-- <h2 class="slds-modal__title">Simulate Demand</h2> -->
                    </header>
                    <div class="slds-modal__content slds-p-around_medium">
                        <!-- Historical Inputs -->
                        <div class="slds-text-title_bold">Modify Historical Data</div>
                        <lightning-layout multiple-rows>
                            <template for:each={simulationInputs} for:item="item">
                                <lightning-layout-item key={item.label} size="3" class="slds-p-around_x-small">
                                    <lightning-input type="number" label={item.label} value={item.value}
                                        data-label={item.label} onchange={handleSimInputChange}>
                                    </lightning-input>
                                </lightning-layout-item>
                            </template>
                        </lightning-layout>

                        <!-- Future Inputs -->
                        <div class="slds-text-title_bold slds-m-top_medium">Optional: Manual Forecast Inputs</div>
                        <lightning-layout multiple-rows>
                            <template for:each={futureForecastInputs} for:item="item">
                                <lightning-layout-item key={item.label} size="3" class="slds-p-around_x-small">
                                    <lightning-input type="number" label={item.label} value={item.value}
                                        data-label={item.label} onchange={handleFutureForecastChange}>
                                    </lightning-input>
                                </lightning-layout-item>
                            </template>
                        </lightning-layout>
                    </div>
                    <footer class="slds-modal__footer slds-text-align_center">
                        <lightning-button variant="neutral" class="slds-m-right_small" label="Cancel" onclick={resetSimulation}></lightning-button>
                        <lightning-button variant="brand" label="Simulate" onclick={handleSimulateForecast}></lightning-button>
            </footer>
        </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
                              </template>
  </lightning-card>
</template>

                    
                    <div class="slds-card__body slds-card__body_inner">
                        <template if:false={isDemandProductSel}> 
                      <div class="slds-illustration slds-illustration_large">
                        <!-- Custom SVG Illustration -->
                        <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-73.000000, -110.000000)">
                              <g>
                                <g transform="translate(75.000000, 240.000000)">
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                                  <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                                  <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                                  <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                                </g>
                                <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(115.000000, 191.000000)">
                                  <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                    <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                                  </g>
                                  <g transform="translate(0.000000, 18.000000)">
                                    <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(175.500000, 153.000000)">
                                  <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(307.500000, 135.000000)">
                                  <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(347.500000, 166.000000)">
                                  <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                    <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                    <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                                  </g>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>

                        <div class="slds-text-longform">
                          <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                        </div>
                       
                        <div class="custom-illustration">
                           
                          <!-- For brevity, not repeating the entire SVG in this response -->
                        </div>
                        
                        
                      </div>
                      </template>
                        <template if:true={isDemandProductSel}>
                           <div class="chart-container">
                                <canvas lwc:dom="manual" class="chart-canvas" data-id="demandByMonth" width="400" height="300"></canvas>
                            </div>
                        </template>
                       

                    </div>
                    </lightning-card>
                  
            </div>

            <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-p-right_small slds-m-top_small">
                  
                     <lightning-card class="maq">
                    <div slot="title">
                      <lightning-icon icon-name="standard:customer_workspace" size="small" alternative-text="Demand by customers " class="slds-m-right_small"></lightning-icon>
                      <a href="#" class="slds-card__header-link slds-truncate" title="Demand by customers "> Demand by customers  </a>
                    </div>
                    <div class="slds-card__body slds-card__body_inner">
                        <template if:false={isDemandProductSel}> 
                      <div class="slds-illustration slds-illustration_large">
                        <!-- Custom SVG Illustration -->
                        <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-73.000000, -110.000000)">
                              <g>
                                <g transform="translate(75.000000, 240.000000)">
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                                  <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                                  <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                                  <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                                </g>
                                <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(115.000000, 191.000000)">
                                  <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                    <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                                  </g>
                                  <g transform="translate(0.000000, 18.000000)">
                                    <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(175.500000, 153.000000)">
                                  <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(307.500000, 135.000000)">
                                  <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(347.500000, 166.000000)">
                                  <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                    <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                    <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                                  </g>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>

                        <div class="slds-text-longform">
                          <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                        </div>
                       
                        <div class="custom-illustration">
                           
                          <!-- For brevity, not repeating the entire SVG in this response -->
                        </div>
                        
                        
                      </div>
                      </template>
                        <template if:true={isDemandProductSel}>
                            <div class="chart-container">
                               <canvas lwc:dom="manual" class="chart-canvas" data-id="topCustomerPie" width="300" height="300"></canvas>
                         </div>
                        </template>
                       
                    </div>
                    </lightning-card>
                  
            </div>

            
            <!-- Demand by Month Chart -->
            <!--div class="slds-col slds-size_1-of-1 slds-medium-size_4-of-12 slds-large-size_4-of-12">
              <div class="chart-container">
                <canvas lwc:dom="manual" class="chart-canvas" data-id="demandByMonth" width="400" height="300"></canvas>
              </div>
            </div-->
            <!-- Demand by Customer Chart -->
            <!--div class="slds-col slds-size_1-of-1 slds-medium-size_4-of-12 slds-large-size_4-of-12">
              <div class="chart-container">
                <canvas lwc:dom="manual" class="chart-canvas" data-id="demandByCustomer" width="400" height="300"></canvas>
              </div>
            </div-->
            <!-- Demand by Product Chart -->
            <!--div class="slds-col slds-size_1-of-1 slds-medium-size_4-of-12 slds-large-size_4-of-12">
              <div class="chart-container">
                <canvas lwc:dom="manual" class="chart-canvas" data-id="demandByProduct" width="400" height="300"></canvas>
              </div>
            </div-->
          </div>
        </template>
        <template if:true={isCustomerPattern}>
          <!--h2 class="section-heading">Customer Order Pattern</h2-->
          <!-- Filters -->
          <div class="slds-grid slds-wrap slds-gutters">
            <div class="slds-col slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12 slds-p-right_small">
                <label class="slds-form-element__label" part="label">Search Customer</label>
              <c-custom-input-lookup-l-w-c obj-name="Account" search-placeholder="Search Customer" icon-name="standard:account" selected-value={selectedCustomer.Id} selected-name={selectedCustomer.Name} onlookupselected={handleCustomerSelected} onremove={handleCustomerRemove} is-value-selected=true ></c-custom-input-lookup-l-w-c>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12  slds-p-right_small">
                <label class="slds-form-element__label" part="label">Search Product</label>
              <c-custom-input-lookup-l-w-c obj-name="Product2" search-placeholder="Search Product" icon-name="standard:product" selected-value={custProd.Id} selected-name={custProd.Name} onremove={handleCustProdRemove} onlookupselected={handleCustomerPatternProductSelected} ></c-custom-input-lookup-l-w-c>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12">
              <lightning-combobox label="Select Year" value={selectedCustomerYear} options={customerYearOptions} onchange={handleCustomerYearChange}></lightning-combobox>
            </div>
          </div>
          <!-- Chart -->
        </br>
          <lightning-card class="maq slds-m-top_large">
                        <div slot="title">
                        <lightning-icon icon-name="standard:code_set" size="small" alternative-text="Customer order trend" class="slds-m-right_small"></lightning-icon>
                        <a href="#" class="slds-card__header-link slds-truncate" title="Customer order trend "> Customer Order Trend  </a>
                        </div>
                    <div class="slds-card__body slds-card__body_inner">
                        <template if:false={isCustomerSelected}> 
                             <div class="slds-illustration slds-illustration_large">
                        <!-- Custom SVG Illustration -->
                        <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-73.000000, -110.000000)">
                              <g>
                                <g transform="translate(75.000000, 240.000000)">
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                                  <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                                  <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                                  <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                                </g>
                                <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(115.000000, 191.000000)">
                                  <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                    <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                                  </g>
                                  <g transform="translate(0.000000, 18.000000)">
                                    <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(175.500000, 153.000000)">
                                  <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(307.500000, 135.000000)">
                                  <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(347.500000, 166.000000)">
                                  <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                    <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                    <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                                  </g>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>

                        <div class="slds-text-longform">
                          <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                        </div>
                       
                        <div class="custom-illustration">
                           
                          <!-- For brevity, not repeating the entire SVG in this response -->
                        </div>
                        
                        
                        </div>
                      </template>
                        <template if:true={isCustomerSelected}>
                           <div class="chart-container slds-m-top_medium">
                            <canvas lwc:dom="manual" data-id="customerPatternChart" width="600" height="300"></canvas>
                        </div>
                        </template>
                       
                    </div>
                    </lightning-card>
                    </br>
          <template if:true={isCustomerSelected}>
         <lightning-card title="Customer RFM Summary" icon-name="standard:account">
            <div class="slds-p-around_medium">
                <div class="slds-grid slds-wrap slds-gutters">
                    <div class="slds-col slds-size_1-of-2 slds-p-bottom_small">
                        <p class="slds-text-title_caps slds-text-title_bold">Last Order</p>
                        <p class="slds-text-heading_small">{customerSummary.lastOrderDate}</p>
                    </div>
                    <div class="slds-col slds-size_1-of-2 slds-p-bottom_small">
                        <p class="slds-text-title_caps slds-text-title_bold">Days Since Last Order</p>
                        <p class="slds-text-heading_small">{customerSummary.recencyDays}</p>
                    </div>
                    <div class="slds-col slds-size_1-of-2 slds-p-bottom_small">
                        <p class="slds-text-title_caps slds-text-title_bold">Total Orders</p>
                        <p class="slds-text-heading_small">{customerSummary.frequency}</p>
                    </div>
                    <div class="slds-col slds-size_1-of-2 slds-p-bottom_small">
                        <p class="slds-text-title_caps slds-text-title_bold">Total Value</p>
                        <p class="slds-text-heading_small">{currencySymbol}{customerSummary.monetary}</p>
                    </div>
        </div>
    </div>
  </lightning-card>

        </template>
        </template>
        <!-- Inventory Overview Sub Tab -->
        <template if:true={isInventory}>
          <!--h2 class="section-heading"> Inventory Overview</h2-->
          <div class="slds-grid slds-wrap">
            <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12 slds-p-right_small">
              <c-custom-input-lookup-l-w-c obj-name="site__c" search-placeholder="Search Warehouse..." icon-name="standard:home" selected-value={selectedSite.Id} selected-name={selectedSite.Name} onlookupselected={handleSiteSelected} filter={siteFilter} onremove={handleRemoveSite}></c-custom-input-lookup-l-w-c>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12 slds-p-right_small">
              <c-custom-input-lookup-l-w-c obj-name="Product2" search-placeholder="Search product" icon-name="standard:product" selected-value={inventoryProduct.Id} selected-name={inventoryProduct.Name} onlookupselected={handleINVProductSelected} onremove={handleRemoveInventoryProduct}></c-custom-input-lookup-l-w-c>
            </div>
            <template if:true={isVersionAvailable}>
              <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12 slds-p-right_small">
                <c-custom-input-lookup-l-w-c obj-name="Version__c" search-placeholder="Search Version/Variance" icon-name="standard:product" selected-value={selectedVersion.Id} selected-name={selectedVersion.Name} onlookupselected={handleVersionSelected} filter={versionFilter} onremove={handleVersionRemove}></c-custom-input-lookup-l-w-c>
              </div>
            </template>
              <!-- <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12 slds-p-right_small">
                  <c-navigate-to-report report-name="Inventory_Overview"></c-navigate-to-report>
              </div> -->
            
            <!-- Warehouse Inventory Chart -->
            <template if:true={showallWarehouses}>
              <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-top_small">
                <div class="chart-container">
                  <lightning-card class="maq">
                    <div slot="title">
                      <lightning-icon icon-name="standard:product" size="small" alternative-text="Overview" class="slds-m-right_small"></lightning-icon>
                      <a href="#" class="slds-card__header-link slds-truncate" title="Overview"> Overview </a>
                    </div>
                    <div class="slds-card__body slds-card__body_inner">
                      <div class="slds-illustration slds-illustration_small">
                        <!-- Custom SVG Illustration -->
                        <svg class="slds-illustration__svg slds-hide" viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-73.000000, -110.000000)">
                              <g>
                                <g transform="translate(75.000000, 240.000000)">
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                                  <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                                  <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                                  <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                                </g>
                                <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(115.000000, 191.000000)">
                                  <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                    <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                                  </g>
                                  <g transform="translate(0.000000, 18.000000)">
                                    <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(175.500000, 153.000000)">
                                  <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(307.500000, 135.000000)">
                                  <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(347.500000, 166.000000)">
                                  <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                    <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                    <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                                  </g>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>
                        <div class="custom-illustration">
                          <canvas lwc:dom="manual" class="chart-canvas" data-id="inventoryByWarehouse" width="400" height="300"></canvas>
                          <!-- For brevity, not repeating the entire SVG in this response -->
                        </div>
                        <div class="slds-text-longform">
                          <!--p class="slds-text-body_regular">We couldn’t load your charts right now.</p-->
                        </div>
                      </div>
                    </div>
                  </lightning-card>
                </div>
              </div>
            </template>
            <template if:true={isSiteSlectSelected}>
              <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-top_small">
                <div class="chart-container">
                  <lightning-card class="maq">
                    <div slot="title">
                      <lightning-icon icon-name="standard:product" size="small" alternative-text="Overview" class="slds-m-right_small"></lightning-icon>
                      <a href="#" class="slds-card__header-link slds-truncate" title="Overview"> Overview </a>
                    </div>
                    <div class="slds-card__body slds-card__body_inner">
                      <div class="slds-illustration slds-illustration_small">
                        <!-- Custom SVG Illustration -->
                        <div class="custom-illustration">
                          <canvas lwc:dom="manual" class="chart-canvas" data-id="inventoryByLocation" width="400" height="300"></canvas>
                          <!-- For brevity, not repeating the entire SVG in this response -->
                        </div>
                        <!--div class="slds-text-longform"><h3 class="slds-text-heading_medium">No new tasks</h3><p class="slds-text-body_regular">Nothing needs your attention right now. Check back later.</p></div-->
                      </div>
                    </div>
                  </lightning-card>
                </div>
              </div>
            </template>
          </div>
        </template>
        <template if:true={isAging}>
          <!--h2 class="section-heading">Stock Aging Report</h2-->
          <!-- Filters -->
          <div class="slds-grid slds-wrap slds-gutters slds-p-bottom_small">
            <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-12 slds-large-size_2-of-12 slds-p-right_small">
              <label class="slds-form-element__label" part="label" for="combobox-button-310">Search warehouse</label>
              <c-custom-input-lookup-l-w-c obj-name="Site__c" search-placeholder="Search warehouse" icon-name="standard:home" selected-value={selectedWarehouseForAging.Id} selected-name={selectedWarehouseForAging.Name} onlookupselected={handleWarehouseSelectForAging} filter={siteFilter} onremove={handleWarehouseRemoveAging} is-value-selected=true></c-custom-input-lookup-l-w-c>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-12 slds-large-size_2-of-12 slds-p-right_small">
              <!-- <lightning-combobox label="Product" value={agingFilters.product} options={productOptionsAging} onchange={handleAgingProductChange}></lightning-combobox> -->
              <label class="slds-form-element__label" part="label" for="combobox-button-310">Search product</label>
              <c-custom-input-lookup-l-w-c obj-name="Product2" search-placeholder="Search product" aria-label="Search product" icon-name="standard:product" selected-value={selectedProduct.Id} selected-name={selectedProduct.Name} onlookupselected={handleAgingProductSelected} onremove={handleAgingProductRemove}></c-custom-input-lookup-l-w-c>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-12 slds-large-size_2-of-12 slds-p-right_small">
              <lightning-combobox label="Age Bucket" value={agingFilters.bucket} options={bucketOptions} onchange={handleAgingBucketChange}></lightning-combobox>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-12 slds-large-size_2-of-12 slds-p-right_small">
              <lightning-combobox label="Status" value={agingFilters.status} options={statusOptions} onchange={handleAgingStatusChange}></lightning-combobox>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-12 slds-large-size_2-of-12 slds-p-right_small slds-p-top_x-large">
              <lightning-input type="checkbox" label="Show Expired Items" onchange={handleExpiredToggle}></lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-12 slds-large-size_2-of-12 slds-p-right_small slds-m-bottom_small slds-align_absolute-center slds-p-top_large">
              <lightning-button label="Clear Filters" onclick={clearAgingFilters}></lightning-button>
            </div>
          </div>
          <lightning-card class="maq">
            <!--div slot="title"><lightning-icon icon-name="standard:product" size="small" alternative-text="Overview" class="slds-m-right_small"></lightning-icon><a href="#" class="slds-card__header-link slds-truncate" title="Overview">
                                                Overview
                                            </a></div-->
            <div class="slds-card__body slds-card__body_inner">
              <template if:false={isWarehouseSelectedForAging}>
                <div class="slds-illustration slds-illustration_large">
                  <!-- Custom SVG Illustration -->
                  <div class="custom-illustration">
                    <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g transform="translate(-73.000000, -110.000000)">
                          <g>
                            <g transform="translate(75.000000, 240.000000)">
                              <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                              <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                              <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                              <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                              <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                            </g>
                            <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                              <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                              <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                              <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                              <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                            </g>
                            <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                              <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                              <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                              <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                              <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                            </g>
                            <g transform="translate(115.000000, 191.000000)">
                              <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                              </g>
                              <g transform="translate(0.000000, 18.000000)">
                                <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                              </g>
                            </g>
                            <g transform="translate(175.500000, 153.000000)">
                              <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                              </g>
                              <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                              </g>
                            </g>
                            <g transform="translate(307.500000, 135.000000)">
                              <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                              </g>
                              <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                              </g>
                            </g>
                            <g transform="translate(347.500000, 166.000000)">
                              <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                              </g>
                              <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                              </g>
                            </g>
                            <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                              <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                              </g>
                            </g>
                          </g>
                        </g>
                      </g>
                    </svg>
                    <!-- For brevity, not repeating the entire SVG in this response -->
                  </div>
                  <div class="slds-text-longform">
                    <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                  </div>
                </div>
              </template>
            </div>
            <template if:true={isWarehouseSelectedForAging}>
              <!-- Chart -->
              <div class="chart-container" style="max-height: 280px;">
                <canvas lwc:dom="manual" data-id="stockAgingChart" width="500" height="250"></canvas>
              </div>
            </template>
            <!-- Table -->
            <lightning-card>
              <template if:true={isWarehouseSelectedForAging}>
               <div class="slds-grid slds-p-around_small slds-grid_align-spread slds-grid_vertical-align-center">
                <div class="slds-text-heading_small">
                  Aging Overview
                </div>
                <lightning-button 
                  label="Download Forecast (CSV)" 
                  icon-name="utility:download" 
                  onclick={downloadAgingAsCSV}>
                </lightning-button>
              </div>
                  <lightning-datatable key-field="id" data={pagedAgingData} columns={agingTableColumns} sorted-by={sortBy} sorted-direction={sortDirection} hide-checkbox-column="true"></lightning-datatable>
              </template>
              <div class="slds-m-around_medium slds-align_absolute-center">
                 <template if:true={isWarehouseSelectedForAging}>
                  <lightning-button label="Prev" onclick={handlePrevPage} disabled={isFirstPage}></lightning-button>
                <span class="slds-m-horizontal_small">Page {currentPage} of {totalPages}</span>
                <lightning-button label="Next" onclick={handleNextPage} disabled={isLastPage}></lightning-button>
                 </template>
                
              </div>
            </lightning-card>
          </lightning-card>
          <!-- trend aging  -->
        </br>
          <lightning-card class="maq">
            <div slot="title">
                <lightning-icon icon-name="standard:asset_downtime_period" size="small" alternative-text="Overview" class="slds-m-right_small"></lightning-icon>
                <a href="#" class="slds-card__header-link slds-truncate" title="Overview">
                     Aging Trend Over Time
                </a>
             
            </div>

            
            <div class="slds-m-bottom_medium slds-grid slds-grid_align-end slds-p-right_small">
                <lightning-combobox label="Select Year" value={selectedYear} options={yearOptions} onchange={handleYearChange}></lightning-combobox>
              </div>
            <div class="slds-card__body slds-card__body_inner">
              <template if:false={isWarehouseSelectedForAging}>
                <div class="slds-illustration slds-illustration_large">
                  <!-- Custom SVG Illustration -->
                  <div class="custom-illustration">
                    <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g transform="translate(-73.000000, -110.000000)">
                          <g>
                            <g transform="translate(75.000000, 240.000000)">
                              <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                              <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                              <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                              <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                              <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                            </g>
                            <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                              <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                              <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                              <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                              <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                            </g>
                            <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                              <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                              <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                              <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                              <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                            </g>
                            <g transform="translate(115.000000, 191.000000)">
                              <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                              </g>
                              <g transform="translate(0.000000, 18.000000)">
                                <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                              </g>
                            </g>
                            <g transform="translate(175.500000, 153.000000)">
                              <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                              </g>
                              <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                              </g>
                            </g>
                            <g transform="translate(307.500000, 135.000000)">
                              <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                              </g>
                              <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                              </g>
                            </g>
                            <g transform="translate(347.500000, 166.000000)">
                              <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                              </g>
                              <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                              </g>
                            </g>
                            <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                              <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                              </g>
                            </g>
                          </g>
                        </g>
                      </g>
                    </svg>
                    <!-- For brevity, not repeating the entire SVG in this response -->
                  </div>
                  <div class="slds-text-longform">
                    <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                  </div>
                </div>
              </template>
              <div class="chart-container" style="max-height: 300px;">
              <canvas lwc:dom="manual" data-id="agingTrendChart" width="600" height="250"></canvas>
            </div>
              <!-- Mini Table -->
			  </div>
          </lightning-card>
          <div class="slds-m-top_medium">
            <h3 class="section-heading"></h3>
            <div class="chart-container" style="max-height: 300px;">
             
            </div>
            
          </div>
        </template>
        <!-- risk and return sub tabs -->
         <!-- risk product insights -->
         <template if:true={isRiskAndReturn}>
          <div class="slds-grid slds-wrap">
            <div class="slds-col slds-size_1-of-1 slds-medium-size_8-of-12 slds-large-size_8-of-12 slds-p-right_small">
          <lightning-card class="maq" style="min-height: 384px;">
                    <div slot="title">
                      <lightning-icon icon-name="standard:customer_workspace" size="small" alternative-text="Demand by customers" class="slds-m-right_small"></lightning-icon>
                      <a href="#" class="slds-card__header-link slds-truncate" title="Demand by customers "> Returned products  </a>
                    </div>
                    <div class="slds-card__body slds-card__body_inner">
                        <template if:false={isRiskAndReturn}> 
                      <div class="slds-illustration slds-illustration_large">
                        <!-- Custom SVG Illustration -->
                        <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-73.000000, -110.000000)">
                              <g>
                                <g transform="translate(75.000000, 240.000000)">
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                                  <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                                  <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                                  <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                                </g>
                                <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(115.000000, 191.000000)">
                                  <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                    <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                                  </g>
                                  <g transform="translate(0.000000, 18.000000)">
                                    <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(175.500000, 153.000000)">
                                  <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(307.500000, 135.000000)">
                                  <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(347.500000, 166.000000)">
                                  <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                    <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                    <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                                  </g>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>

                        <div class="slds-text-longform">
                          <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                        </div>
                       
                        <div class="custom-illustration">
                           
                          <!-- For brevity, not repeating the entire SVG in this response -->
                        </div>
                        
                        
                      </div>
                      </template>
                        <template if:true={isRiskAndReturn}>
                            <div class="chart-container">
                               <canvas data-id="returnBar" style="width:100%; max-height:300px;"></canvas>
                         </div>
                            
                        </template>
                       
                    </div>
                    </lightning-card>
                    </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_4-of-12 slds-large-size_4-of-12">          
                  <lightning-card class="maq">
                    <div slot="title">
                      <lightning-icon icon-name="standard:customer_workspace" size="small" alternative-text="Demand by customers" class="slds-m-right_small"></lightning-icon>
                      <a href="#" class="slds-card__header-link slds-truncate" title="Demand by customers "> Returned Reasons  </a>
                    </div>
                    <div class="slds-card__body slds-card__body_inner">
                        <template if:false={isRiskAndReturn}> 
                      <div class="slds-illustration slds-illustration_large">
                        <!-- Custom SVG Illustration -->
                        <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-73.000000, -110.000000)">
                              <g>
                                <g transform="translate(75.000000, 240.000000)">
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                                  <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                                  <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                                  <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                                </g>
                                <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(115.000000, 191.000000)">
                                  <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                    <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                                  </g>
                                  <g transform="translate(0.000000, 18.000000)">
                                    <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(175.500000, 153.000000)">
                                  <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(307.500000, 135.000000)">
                                  <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(347.500000, 166.000000)">
                                  <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                    <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                    <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                                  </g>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>

                        <div class="slds-text-longform">
                          <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                        </div>
                       
                        <div class="custom-illustration">
                           
                          <!-- For brevity, not repeating the entire SVG in this response -->
                        </div>
                        
                        
                      </div>
                      </template>
                        <template if:true={isRiskAndReturn}>
                            <div class="chart-container">
                               <canvas data-id="returnPie" style="width: 100%; max-height: 300px; margin-top: 2rem;"></canvas>
                         </div>
                            
                        </template>
                       
                    </div>
                    </lightning-card>
                    </div>
                    </div>
                    <div class="slds-m-top_small"></div>
                    <lightning-card class="maq" >
                    <div slot="title">
                      <lightning-icon icon-name="standard:customer_workspace" size="small" alternative-text="Demand by customers" class="slds-m-right_small"></lightning-icon>
                      <a href="#" class="slds-card__header-link slds-truncate" title="Demand by customers "> Returned Rate Trend  </a>
                    </div>
                    <div class="slds-card__body slds-card__body_inner">
                        <template if:false={isRiskAndReturn}> 
                      <div class="slds-illustration slds-illustration_large">
                        <!-- Custom SVG Illustration -->
                        <svg class="slds-illustration__svg " viewBox="0 0 454 182" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-73.000000, -110.000000)">
                              <g>
                                <g transform="translate(75.000000, 240.000000)">
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(375.250000, 18.000000) scale(-1, 1) translate(-375.250000, -18.000000) " points="335.5 36 380 0 415 27"></polyline>
                                  <polyline vector-effect="non-scaling-stroke" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" transform="translate(324.500000, 22.500000) scale(-1, 1) translate(-324.500000, -22.500000) " points="303 18 313.5 9 346 36"></polyline>
                                  <path vector-effect="non-scaling-stroke" d="M0,36.5 L450,36.5" class="slds-illustration__stroke-secondary" stroke-width="3" stroke-linecap="round"></path>
                                  <path vector-effect="non-scaling-stroke" d="M406.04276,9.26543454 L413,32.7461193 L400.495829,23.8448556 L404.113561,9.30802252 C404.246938,8.772085 404.789525,8.44574518 405.325462,8.57912213 C405.669253,8.66468028 405.942114,8.9257539 406.04276,9.26543454 Z" class="slds-illustration__fill-secondary"></path>
                                  <path vector-effect="non-scaling-stroke" d="M311.962964,11.4391572 L318,33 L306.770218,23.1063642 L310.037036,11.4391572 C310.185948,10.9073269 310.7378,10.5969106 311.26963,10.7458231 C311.605963,10.8399963 311.868791,11.1028246 311.962964,11.4391572 Z" class="slds-illustration__fill-secondary" transform="translate(312.385109, 21.626882) scale(-1, 1) translate(-312.385109, -21.626882) "></path>
                                </g>
                                <g transform="translate(83.000000, 173.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(274.000000, 111.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <path vector-effect="non-scaling-stroke" d="M44,17.5 L63,17.5 C62.2789714,12.0723971 64.081543,7.53186978 68.4077148,3.87841797 C73.3754883,-0.195556641 79.2734375,0.717773438 82.440918,2.12353516 C85.6083984,3.52929687 87.9606934,5.46069336 89.5913086,9.10524041 C90.2822266,10.6397351 90.7517904,11.9379883 91,13"></path>
                                  <path vector-effect="non-scaling-stroke" d="M83,20.5 C84.0558268,16.8461914 86.2227376,14.4572754 89.5007324,13.333252 C94.4177246,11.6472168 99.0800781,13.8925781 100.942383,16.1518555 C102.804687,18.4111328 103.39502,20.2260742 103.746582,22.1201172 C103.980957,23.3828125 104.06543,24.8427734 104,26.5 C108.141764,26.3313802 110.918945,27.1647135 112.331543,29 C114.040039,31.1936035 114.215332,33.817627 113.593018,35.75 C112.970703,37.682373 110.894531,40.5 107,40.5 L28,40.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M18,27.5 L83.0004985,27.5"></path>
                                  <path vector-effect="non-scaling-stroke" d="M0,27.5 L8,27.5"></path>
                                </g>
                                <g transform="translate(115.000000, 191.000000)">
                                  <g transform="translate(148.000000, 32.000000) scale(-1, 1) translate(-148.000000, -32.000000) translate(116.000000, 0.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M25,53 C25,55.76 22.76125,58 20,58 C17.24,58 15,55.76 15,53 C15,50.24 17.24,48 20,48 C22.76125,48 25,50.24 25,53 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,58 C6.34130214,58 5,59.344354 5,61 C5,62.655646 6.34130214,64 8,64 C9.65717192,64 11,62.655646 11,61 C11,59.344354 9.65717192,58 8,58"></path>
                                    <path vector-effect="non-scaling-stroke" d="M43.2932416,0 C35.2856577,0 28.3128049,4.40586521 24.6382957,10.9184604 C22.0889739,9.11222859 18.9814709,8.03886643 15.6213524,8.03886643 C6.99160591,8.03886643 0,15.0367986 0,23.6690948 C0,32.302472 6.99160591,39.3004042 15.6213524,39.3004042 C15.8077805,39.3004042 15.9920023,39.2777047 16.1806367,39.2712191 C19.0013272,43.3344299 23.6918145,46 29.011083,46 C32.7848734,46 36.2475826,44.6596485 38.9469293,42.4296926 C40.3512074,42.7193815 41.8051261,42.8739543 43.2932416,42.8739543 C55.1275661,42.8739543 64,33.4569038 64,21.6185732 C64,9.77916158 55.1275661,0 43.2932416,0 Z"></path>
                                  </g>
                                  <g transform="translate(0.000000, 18.000000)">
                                    <path vector-effect="non-scaling-stroke" d="M90.5057553,53.0538038 C90.5057553,53.0538038 116.215483,58.0701972 145.433002,58.0701972 C174.650521,58.0701972 204.505755,53.0538038 204.505755,53.0538038 C204.505755,53.0538038 192.222862,60.6378663 185.905056,63.0258453 C179.58725,65.4138243 166.637272,67.3671811 166.637272,67.3671811 C166.637272,67.3671811 153.865271,70.7987363 147.505755,70.9374424 C141.14624,71.0761485 132.54218,68.1108222 132.54218,68.1108222 L106.786672,63.0258453 L90.5057553,53.0538038 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M84.8198266,43.3368404 C84.8198266,43.3368404 99.4457512,70.425365 147.915957,70.425365 C196.386164,70.425365 214.819827,43.3368404 214.819827,43.3368404" class="slds-illustration__stroke-primary" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M73,49.5 L88,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M211,49.5 L226,49.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M142.74548,0 L153.650377,2.22044605e-16 C154.478804,8.05656105e-16 155.150377,0.671572875 155.150377,1.5 L155.150377,2.98261094 C155.150377,3.11136765 155.100706,3.2351613 155.01171,3.32820944 L146.234757,12.5047677 L155.209827,12.5047677 C156.038254,12.5047677 156.709827,13.1763405 156.709827,14.0047677 L156.709827,14.4270108 C156.709827,15.2554379 156.038254,15.9270108 155.209827,15.9270108 L141.888626,15.9270108 C141.060199,15.9270108 140.388626,15.2554379 140.388626,14.4270108 L140.388626,12.8248256 C140.388626,12.696109 140.438265,12.5723507 140.527212,12.4793109 L149.20663,3.40051458 L142.74548,3.40051458 C141.917053,3.40051458 141.24548,2.7289417 141.24548,1.90051458 L141.24548,1.5 C141.24548,0.671572875 141.917053,1.52179594e-16 142.74548,0 Z" class="slds-illustration__fill-primary"></path>
                                    <path vector-effect="non-scaling-stroke" d="M20,81.5 L390,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M0,81.5 L12,81.5" class="slds-illustration__stroke-primary" stroke-width="3" stroke-linecap="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(175.500000, 153.000000)">
                                  <g transform="translate(0.000000, 7.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 94.5 -1.82254212e-12 94.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,8.09449405 C17,92.0999502 17,135.036706 17,136.904762 C17,135.036706 17,92.0999502 17,8.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,64.2334004 C24.3333333,71.7198767 28,75.6881307 28,76.1381623 C28,75.6881307 24.3333333,71.7198767 17,64.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 70.185781) scale(-1, 1) translate(-22.500000, -70.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M8,50.2334004 C14,57.05321 17,60.6881307 17,61.1381623 C17,60.6881307 14,57.05321 8,50.2334004 Z" stroke-linejoin="round"></path>
                                  </g>
                                </g>
                                <g transform="translate(307.500000, 135.000000)">
                                  <g transform="translate(0.000000, 2.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M29.524032,0.669921875 L55.6419593,108.305728 C55.9024257,109.379148 55.2433964,110.460477 54.1699762,110.720943 C54.0155692,110.75841 53.8572476,110.777344 53.69836,110.777344 L2.40272523,110.777344 C1.29815573,110.777344 0.402725233,109.881913 0.402725233,108.777344 C0.402725233,108.601258 0.42597945,108.425943 0.471884777,108.255946 L29.524032,0.669921875 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="29 0 56.572466 112.5 0 112.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M29,6.09449405 C29,103.433283 29,153.036706 29,154.904762 C29,153.036706 29,103.433283 29,6.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,74.2334004 C41,87.05321 47,93.6881307 47,94.1381623 C47,93.6881307 41,87.05321 29,74.2334004 Z" stroke-linejoin="round" transform="translate(38.000000, 84.185781) scale(-1, 1) translate(-38.000000, -84.185781) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M14,61.2334004 C24,72.7198767 29,78.6881307 29,79.1381623 C29,78.6881307 24,72.7198767 14,61.2334004 Z" stroke-linejoin="round"></path>
                                    <path vector-effect="non-scaling-stroke" d="M29,48.2334004 C36.3333333,57.05321 40,61.6881307 40,62.1381623 C40,61.6881307 36.3333333,57.05321 29,48.2334004 Z" stroke-linejoin="round" transform="translate(34.500000, 55.185781) scale(-1, 1) translate(-34.500000, -55.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(347.500000, 166.000000)">
                                  <g transform="translate(0.000000, 4.000000)" class="slds-illustration__fill-secondary">
                                    <path vector-effect="non-scaling-stroke" d="M19.3444016,2.17529966 L32.8957957,84.445825 C33.0753185,85.5357082 32.3373256,86.5647651 31.2474424,86.7442879 C31.1399954,86.7619863 31.0312825,86.7708798 30.9223876,86.7708798 L2.12566435,86.7708798 C1.02109485,86.7708798 0.125664347,85.8754493 0.125664347,84.7708798 C0.125664347,84.6486417 0.136870913,84.526661 0.159143349,84.4064691 L15.4044726,2.13594377 C15.6057311,1.04986421 16.6493247,0.332574998 17.7354043,0.533833473 C18.5639901,0.687376483 19.2074411,1.34381197 19.3444016,2.17529966 Z"></path>
                                  </g>
                                  <g class="slds-illustration__stroke-primary" stroke-linecap="round" stroke-width="3">
                                    <polygon vector-effect="non-scaling-stroke" stroke-linejoin="round" points="17 0.709590879 34 91.5 -1.82254212e-12 91.5"></polygon>
                                    <path vector-effect="non-scaling-stroke" d="M17,5.09449405 C17,83.0999502 17,123.036706 17,124.904762 C17,123.036706 17,83.0999502 17,5.09449405 Z"></path>
                                    <path vector-effect="non-scaling-stroke" d="M17,61.2334004 C24.3333333,68.7198767 28,72.6881307 28,73.1381623 C28,72.6881307 24.3333333,68.7198767 17,61.2334004 Z" stroke-linejoin="round" transform="translate(22.500000, 67.185781) scale(-1, 1) translate(-22.500000, -67.185781) "></path>
                                  </g>
                                </g>
                                <g transform="translate(392.000000, 184.000000)" class="slds-illustration__stroke-secondary" stroke-linecap="round" stroke-width="3">
                                  <g transform="translate(31.713442, 25.088326) rotate(-15.000000) translate(-31.713442, -25.088326) translate(4.713442, 6.588326)">
                                    <path vector-effect="non-scaling-stroke" d="M31.0360707,3.43528591 C31.0360707,3.43528591 40.5802283,0.671893051 42.6488424,10.6908663" transform="translate(36.842457, 6.888440) rotate(41.000000) translate(-36.842457, -6.888440) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M40.4282002,10.1797377 C40.4282002,10.1797377 49.9723578,7.4163448 52.0409719,17.435318" transform="translate(46.234586, 13.632892) scale(-1, 1) rotate(-41.000000) translate(-46.234586, -13.632892) "></path>
                                    <path vector-effect="non-scaling-stroke" d="M0.730284783,29.5865514 C0.730284783,29.5865514 10.2744424,26.8231586 12.3430565,36.8421318"></path>
                                    <path vector-effect="non-scaling-stroke" d="M12.7302848,29.5865514 C12.7302848,29.5865514 22.2744424,26.8231586 24.3430565,36.8421318" transform="translate(18.536671, 33.039705) scale(-1, 1) translate(-18.536671, -33.039705) "></path>
                                  </g>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>

                        <div class="slds-text-longform">
                          <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                        </div>
                       
                        <div class="custom-illustration">
                           
                          <!-- For brevity, not repeating the entire SVG in this response -->
                        </div>
                        
                        
                      </div>
                      </template>
                        <template if:true={isRiskAndReturn}>
                            <div class="chart-container">
                                <canvas data-id="returnRateTrend" width="800" height="300" style="margin-top: 2rem;"></canvas>
                         </div>
                            
                        </template>
                       
                    </div>
                    </lightning-card>
                    <div class="slds-m-top_small"></div>
                  <template if:true={topReturnedProducts.length}>
                            <lightning-card title="Returned Product Details">
                              <lightning-datatable
                                  key-field="productId"
                                  data={pagedReturnedProducts}
                                  columns={returnedProductsColumns}
                                  hide-checkbox-column
                                  show-row-number-column
                                  class="slds-p-around_medium">
                              </lightning-datatable>
                              

                        </lightning-card>
                        <div class="slds-m-top_medium slds-align_absolute-center">
                            <lightning-button 
                                variant="neutral" 
                                label="Previous" 
                                onclick={handleRPPreviousPage} 
                                disabled={isRPFirstPage}>
                            </lightning-button>

                            <span class="slds-m-horizontal_small"> Page {RPcurrentPage} of {RPtotalPages} </span>
                            <lightning-button 
                                variant="neutral" 
                                label="Next" 
                                onclick={handleRPNextPage} 
                                disabled={isRPLastPage}>
                            </lightning-button>
                        </div>


                          </template>
         </template>

         
        <!-- customer risk and return insights -->
         <template if:true={isCustomerRAR}>
          <template if:true={top5Customers}>
            <lightning-card class="maq" title="Top 5 Returning Customers">
              <div class="chart-container">
                    <!--h3 class="slds-text-heading_small slds-m-bottom_small">Top 5 Returning Customers</h3-->
                    <canvas data-id="customerReturnBar" style="width:100%; max-height:300px;"></canvas>
              </div>
          </lightning-card>
        </template>
        <div class="slds-m-top_small"></div>
        <template if:true={customerReturnData}>
    <lightning-card class="maq" title="Customer Return Summary">
        <!--h3 class="slds-text-heading_small slds-m-bottom_small">Customer Return Summary</h3-->

       <lightning-datatable
          key-field="customerId"
          data={paginatedCustomerReturns}
          columns={customerReturnColumns}
          hide-checkbox-column
          show-row-number-column>
      </lightning-datatable>


        <div class="slds-m-top_medium slds-align_absolute-center">
            <lightning-button variant="neutral" label="Previous" onclick={handleCRPreviousPage} disabled={isCRFirstPage}></lightning-button>
            <span class="slds-m-horizontal_small"> Page {CRcurrentPage} of {CRtotalPages} </span>
            <lightning-button variant="neutral" label="Next" onclick={handleCRNextPage} disabled={isCRLastPage}></lightning-button>

        </div>
    </lightning-card>
</template>

         </template>
         
        <!--========================================= Inventory Levels================================= -->
        <!-- Inventory Level -->

                <template if:true={isInventoryLevel}>



                    <!-- Main Lightning Card -->
                    <lightning-card title="📊 Inventory Level Chart">

                        <!-- Filters in One Line -->
                        <div class="slds-grid slds-wrap slds-gutters slds-p-around_small slds-align-end">

                            <!-- Product Lookup -->
                            <div class="slds-col slds-size_12-of-12 slds-medium-size_3-of-12">
                                <div class="slds-form-element">
                                    <label class="slds-form-element__label" for="productLookup">Product</label>
                                    <div class="slds-form-element__control">
                                        <c-custom-input-lookup-l-w-c id="productLookup" obj-name="Product2"
                                            filter="Issue_Manufacturing_Order__c = true"
                                            icon-name="standard:product" search-placeholder="Search Product"
                                            selected-value={productId} selected-name={productName}
                                                                        onremove={handleProductRemoved}
                                            onlookupselected={handleProductSelection}>
                                        </c-custom-input-lookup-l-w-c>
                                    </div>
                                </div>
                            </div>

                            <!-- From Date -->
                            <div class="slds-col slds-size_12-of-12 slds-medium-size_3-of-12">
                                <lightning-input type="date" label="From Date" value={fromDate}
                                    onchange={handleFromDateChange}>
                                </lightning-input>
                            </div>

                            <!-- To Date -->
                            <div class="slds-col slds-size_12-of-12 slds-medium-size_3-of-12">
                                <lightning-input type="date" label="To Date" value={toDate}
                                    onchange={handleToDateChange}>
                                </lightning-input>
                            </div>

                            <!-- Search Button -->
                            <div class="slds-col slds-size_12-of-12 slds-medium-size_3-of-12 slds-p-top_large">
                                <lightning-button label="Search" variant="brand" onclick={handleSearch}>
                                </lightning-button>
                                <lightning-button variant="neutral" label="Create MO" icon-name="utility:description"
                                    onclick={handleCreateMO} class="slds-m-left_small"></lightning-button>
                            </div>
                        </div>


                        <!-- 📊 Top 5 Products View -->
                        <template if:true={isTop5View}>
                            <div class="slds-m-top_large" data-id="top5ChartContainer">
                                <canvas class="barChartTop5" lwc:dom="manual"></canvas>
                            </div>
                        </template>

                        <!-- 📊 Single Product View -->
                        <template if:true={isSingleProductView}>
                            <div class="slds-m-top_large" data-id="singleProductChartContainer">
                                <canvas class="barChartSingle" lwc:dom="manual"></canvas>
                            </div>

                            <!-- Detailed Summary Table -->
                            <lightning-card title="📦 Inventory Summary" class="slds-m-top_large">
                                <div class="slds-box slds-box_xx-small">
                                    <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                        <thead>
                                            <tr>
                                                <th>Raw</th>
                                                <th>WIP</th>
                                                <th>Finished</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <div><strong>Expected Quantity:</strong> {rawExpected}</div>
                                                    <div><strong>Consumed Quantity:</strong> {rawConsumed}</div>
                                                    <div><strong>Scrapped Quantity:</strong> {rawScrapped}</div>
                                                </td>
                                                <td>
                                                    <div><strong>Produced Quantity:</strong> {wipQuantity}</div>
                                                    <div><strong>Scrapped Quantity:</strong> {wipScrapped}</div>
                                                </td>
                                                <td>
                                                    <div><strong>No of Items Requested:</strong> {finishedRequested}
                                                    </div>
                                                    <div><strong>Number of Items In Stock:</strong> {finishedInStock}
                                                    </div>
                                                    <div><strong>Number of Items Scrapped:</strong> {finishedScrapped}
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </lightning-card>
                        </template>
                    </lightning-card>
                </template>

              <template if:true={isStockMovement}>
        <lightning-card title="Stock Movements Overview">
            <div class="slds-grid slds-wrap slds-var-p-around_medium">
                <!-- Stock Summary Section -->
                <div class="slds-col slds-size_12-of-12 slds-medium-size_6-of-12 slds-var-p-bottom_medium">
                    <div class="stock-summary">
                        <div class="summary-box inwards">
                            <div class="summary-label">Total Inwards</div>
                            <div class="summary-value">{totalInwards}</div>
                        </div>
                        <div class={outwardBoxClass}>
                            <div class="summary-label">Total Outwards</div>
                            <div class="summary-value">{totalOutwards}</div>
                        </div>
                    </div>
                </div>

                <!-- Year Filter Section -->
                <div class="slds-col slds-size_12-of-12 slds-medium-size_6-of-12 slds-align_absolute-center slds-var-p-bottom_medium">
                    <div class="filter-container">
                        <lightning-combobox
                            label="Select Year"
                            value={selectedYear}
                            options={yearOptions}
                            onchange={handleSMYearChange}
                        ></lightning-combobox>
                    </div>
                </div>

                <!-- Charts Container -->
                <div class="charts-container slds-grid slds-wrap slds-col slds-size_12-of-12">
                    <div class="slds-col slds-size_12-of-12 slds-medium-size_6-of-12 slds-var-p-right_small slds-var-p-bottom_medium">
                        <div class="chart-box">
                            <h3 class="section-heading">Inwards</h3>
                            <canvas lwc:dom="manual" class="chart-canvas" data-id="inwardChart"></canvas>
                        </div>
                    </div>
                    <div class="slds-col slds-size_12-of-12 slds-medium-size_6-of-12 slds-var-p-left_small slds-var-p-bottom_medium">
                        <div class="chart-box">
                            <h3 class="section-heading">Outwards</h3>
                            <canvas lwc:dom="manual" class="chart-canvas" data-id="outwardChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </lightning-card>

        <!-- Gap between cards -->
        <div class="slds-var-p-vertical_medium"></div>

        <lightning-card title="Stock Trend">
            <div class="slds-var-p-around_medium">
                <div class="chart-box">
                    <h3 class="section-heading">Overall Stock Trend</h3>
                    <canvas lwc:dom="manual" data-id="stockTrendChart" style="max-height: 300px;"></canvas>
                </div>
            </div>
        </lightning-card>
             </template>
            
            
         <!-- simulation planning sub tab  -->
          <template if:true={isSimulationPlanning}>
            <lightning-card title="Advance Scenario Simulator">
            <!-- Top row: Product lookup (left) + actions (right) -->
            <div class="slds-grid slds-wrap slds-p-around_small slds-gutters">
            <div class="slds-col slds-size_1-of-1 slds-large-size_3-of-12">
              <c-custom-input-lookup-l-w-c
                obj-name="Product2"
                search-placeholder="Search.."
                icon-name="standard:product"
                selected-value={selectedProduct.Id}
                selected-name={selectedProduct.Name}
                onlookupselected={handleProductSelected}
                onremove={handleDemandProdRemove}
                is-value-selected="true">
              </c-custom-input-lookup-l-w-c>
            </div>

            <div class="slds-col slds-size_1-of-1 slds-large-size_9-of-12">
              <div class="actions-bar slds-m-top_x-small slds-grid slds-wrap slds-grid_align-end">
              <div class="slds-col slds-size_1-of-1 slds-large-size_3-of-12 slds-text-align_right">
              <div class="slds-form-element__label">
                Forecasting Model
              </div>
            </div>

            <div class="slds-col slds-size_1-of-1 slds-large-size_3-of-12">
              <lightning-combobox
                label="Forecasting Model"
                variant="label-hidden"
                value={selectedModel}
                options={modelOptions}
                onchange={handleModelChange}>
              </lightning-combobox>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-large-size_3-of-12">
                  <lightning-button
                    label="Evaluate Simulations"
                    onclick={handleEvaluateSimulations}
                    variant="brand">
                  </lightning-button>
                </div>

            </div>
            </div>
            </div>
          <div class="slds-grid slds-wrap slds-p-around_small slds-gutters slds-grid_vertical-align-center">
              <template if:true={simulationHasRun}>
                
                  <div class="slds-col slds-size_1-of-1 slds-large-size_6-of-12">
                      <lightning-input
                          label="File Name"
                          value={customFileName}
                          onchange={handleFileNameChange}
                          placeholder="Enter custom file name"
                          class="file-input">
                      </lightning-input>
                  </div>

                  <div class="slds-col slds-size_1-of-1 slds-large-size_6-of-12">
                      <div class="slds-grid slds-wrap slds-grid_align-end slds-button-group slds-p-top_small">
                          <lightning-button
                              label="Download Forecast (CSV)"
                              icon-name="utility:download"
                              onclick={downloadForecastAsCSV}
                              class="slds-m-left_x-small"
                              variant="success"
                              >
                          </lightning-button>

                          <lightning-button
                              variant="brand"
                              label="Save Simulation"
                              icon-name="utility:save"
                              onclick={handleSaveSimulation}
                              disabled={isSavingSimulation}
                              class="slds-m-left_x-small">
                          </lightning-button>

                          <lightning-button-icon
                              icon-name="utility:refresh"
                              variant="border-filled"
                              alternative-text="Reset"
                              onclick={resetSimulation}
                              class="slds-m-left_x-small">
                          </lightning-button-icon>
                      </div>
                  </div>
              </template>
          </div>
            
            


            <!-- Main content: Left = Simulation Planner (always visible) | Right = Big chart -->
            <div class="slds-grid slds-gutters slds-wrap slds-p-horizontal_small">
              <!-- LEFT: Simulation Planner -->
              <div class="slds-col slds-size_1-of-1 slds-large-size_4-of-12">
                <div class="slds-box" style="border:1px solid #ddd;padding:5px;">
                <lightning-card title="Simulation Planner" class="panel-card">
              <div class="slds-p-around_medium">
                  <div class="slds-m-top_small">
                      <div class="slds-text-title_bold">Historical Range (months)</div>
                      <div class="slds-grid slds-gutters slds-m-top_x-small">
                          <div class="slds-col slds-size_1-of-2">
                              <lightning-input type="number"
                                              label="Start"
                                              min="1"
                                              max={historicalMonthsCount}
                                              value={historicalStart}
                                              onchange={handleHistoricalStartChange}>
                              </lightning-input>
                          </div>
                          <div class="slds-col slds-size_1-of-2">
                              <lightning-input type="number"
                                              label="End"
                                              min="1"
                                              max={historicalMonthsCount}
                                              value={historicalEnd}
                                              onchange={handleHistoricalEndChange}>
                              </lightning-input>
                          </div>
                      </div>
                      <div class="slds-text-body_small slds-m-top_x-small">
                          Showing months {historicalStart} through {historicalEnd}
                      </div>
                  </div>

                  <div class="slds-m-top_medium">
                      <div class="slds-text-title_bold">Future months to edit</div>
                      <lightning-slider min="0"
                                        max={forecastHorizon}
                                        step="1"
                                        value={futureEditCount}
                                        onchange={handleFutureCountChange}>
                      </lightning-slider>
                      <div class="slds-text-body_small slds-m-top_x-small">
                          Will enable editing for first {futureEditCount} future month(s)
                      </div>
                  </div>

                  <div class="slds-m-top_medium month-list slds-scrollable_y">
                      <template for:each={displayHistoricalMonths} for:item="m">
                          <div key={m.label}
                              class="row-line slds-grid slds-grid_align-spread slds-p-vertical_x-small slds-align_absolute-center">
                              <div class="slds-col slds-size_2-of-12">{m.label}</div>
                              <div class="slds-col slds-size_7-of-12 slds-p-horizontal_x-small">
                                  <lightning-slider min="0" max={maxSliderValue} step="1"
                                                  value={m.value}
                                                  data-label={m.label}
                                                  onchange={handleMonthSliderChange}>
                                  </lightning-slider>
                              </div>
                              <div class="slds-col slds-size_3-of-12 slds-text-align_right">
                                  <lightning-input type="number"
                                                  value={m.value}
                                                  data-label={m.label}
                                                  onchange={handleMonthNumberChange}>
                                  </lightning-input>
                              </div>
                          </div>
                      </template>

                      <template for:each={displayFutureMonths} for:item="m">
                          <div key={m.label}
                              class="row-line slds-grid slds-grid_align-spread slds-p-vertical_x-small slds-align_absolute-center">
                              <div class="slds-col slds-size_2-of-12">
                                  {m.label} <span class="slds-text-color_weak">(future)</span>
                              </div>
                              <div class="slds-col slds-size_7-of-12 slds-p-horizontal_x-small">
                                  <lightning-slider min="0" max={maxSliderValue} step="1"
                                                  value={m.value}
                                                  data-label={m.label}
                                                  onchange={handleMonthSliderChange}>
                                  </lightning-slider>
                              </div>
                              <div class="slds-col slds-size_3-of-12 slds-text-align_right">
                                  <lightning-input type="number"
                                                  value={m.value}
                                                  data-label={m.label}
                                                  onchange={handleMonthNumberChange}>
                                  </lightning-input>
                              </div>
                          </div>
                      </template>
                  </div>

                  <div class="slds-m-top_medium slds-grid slds-grid_align-spread">
                      <lightning-button label="Reset" variant="neutral" onclick={resetSimulation}></lightning-button>

                      <lightning-button
              label="Preview"
              icon-name="utility:preview"
              onclick={handleSimulateForecast}
              class="slds-m-right_x-small">
          </lightning-button>

          <!-- <lightning-button
              label="Save"
              icon-name="utility:save"
              variant="brand"
              onclick={handleSaveSimulation}
              disabled={isSavingSimulation}>
          </lightning-button> -->
                  </div>
              </div>
          </lightning-card>
                </div>
              </div>

              <!-- RIGHT: Big chart -->
              <div class="slds-col slds-size_1-of-1 slds-large-size_8-of-12">
                <div class="slds-box" style="border:1px solid #ddd;padding:5px;">
                <lightning-card class="chart-card">
                  <div slot="title" class="slds-grid slds-grid_vertical-align-center">
                    <lightning-icon icon-name="standard:budget" size="small"
                                    alternative-text="Monthly Demand"
                                    class="slds-m-right_small"></lightning-icon>
                    <span class="slds-truncate" title="Monthly Demand">Demand for this year</span>
                  </div>

                  <div class="slds-card__body slds-card__body_inner">
                    <template if:false={isDemandProductSel}>
                      <!-- keep your illustration if no product is selected -->
                      <div class="slds-illustration slds-illustration_large">
                        <!-- (your existing SVG illustration) -->
                        <div class="slds-text-longform">
                          <p class="slds-text-body_regular">We couldn’t load your charts right now.</p>
                        </div>
                      </div>
                    </template>

                    <template if:true={isDemandProductSel}>
                      <div class="chart-container">
                        <canvas lwc:dom="manual"
                                class="chart-canvas"
                                data-id="demandByMonth">
                        </canvas>
                      </div>
                    </template>
                  </div>
                </lightning-card>
                </div>
              </div>
            </div>

            </lightning-card>
          </template>

      </div>
    </div>
  </div>
</template>